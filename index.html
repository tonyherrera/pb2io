<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>pb2.io ‚Äî punks on billboards, worldwide</title>
<link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAABMElEQVR4nO2YMQ6CMBRAq/EIzoTRkOjgSBgNAwcwhnMwODE7O3oAwgV0MI6No4vGODbM3gEH8o0xEEpbQtr+N5HmN/3/PygUQhDEbkZdJ8SBU6pMIKNF5xx+GatKZCi4q4fOz5yp1IKv4l07LmpCewOTtgDofBgse0mgyQgv5hsAzvTWZx7CmG/AOeS9JnA/XaoLmgrNN98AkEdx7fjmlAnFqUJ7A50LYIwRxpiyOFm0N8D9DACu6yqNk8UeA7y7SF+7TRPaG8AChka4gJ3nk53nq8xFCO0NdH4PANvnVWUewphvAL7X59FKaqH4UZ0r6Lk62QVhdcZeJHu7/wu1GjgmKXSoJETcBHQeWKzlOg+YbwCQNfG95xV1HrDHAPBvghfZ3aYJ7Q0gCIIgCILYzAdkPUkC1foHBAAAAABJRU5ErkJggg==">
<link rel="shortcut icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAABMElEQVR4nO2YMQ6CMBRAq/EIzoTRkOjgSBgNAwcwhnMwODE7O3oAwgV0MI6No4vGODbM3gEH8o0xEEpbQtr+N5HmN/3/PygUQhDEbkZdJ8SBU6pMIKNF5xx+GatKZCi4q4fOz5yp1IKv4l07LmpCewOTtgDofBgse0mgyQgv5hsAzvTWZx7CmG/AOeS9JnA/XaoLmgrNN98AkEdx7fjmlAnFqUJ7A50LYIwRxpiyOFm0N8D9DACu6yqNk8UeA7y7SF+7TRPaG8AChka4gJ3nk53nq8xFCO0NdH4PANvnVWUewphvAL7X59FKaqH4UZ0r6Lk62QVhdcZeJHu7/wu1GjgmKXSoJETcBHQeWKzlOg+YbwCQNfG95xV1HrDHAPBvghfZ3aYJ7Q0gCIIgCILYzAdkPUkC1foHBAAAAABJRU5ErkJggg==">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=DM+Mono:ital,wght@0,300;0,400;0,500;1,300&family=Bebas+Neue&family=Space+Mono:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  /* ‚îÄ‚îÄ DARK THEME (default) ‚îÄ‚îÄ */
  :root {
    --bg: #0a0a0a;
    --surface: #111;
    --border: #1e1e1e;
    --border-subtle: #161616;
    --accent: #ff3c00;
    --text: #d4d4d4;
    --text-strong: #eeeeee;
    --dim: #555;
    --dim2: #333;
    --map-bg: #0d1117;
    --map-land: #151c25;
    --map-land-stroke: #1e2a36;
    --map-grid: #1a1a1a;
    --green: #00cc70;
    --green-glow: #00ff88;
    --nav-bg: rgba(10,10,10,0.92);
    --billboard-bg: #111;
    --billboard-border: #2a2a2a;
    --poe-bg: #0d0d0d;
    --feed-hover: #161616;
    --feed-selected: #1a1a1a;
    --thumb-border: #222;
    --scrollbar: #222;
    --big-label-color: #1e1e1e;
    --overlay-title: #222;
    --logo-color: #fff;
  }

  /* ‚îÄ‚îÄ LIGHT THEME ‚îÄ‚îÄ */
  html.light {
    --bg: #f0ede8;
    --surface: #faf8f5;
    --border: #ddd8d0;
    --border-subtle: #e8e4de;
    --accent: #e03000;
    --text: #2a2520;
    --text-strong: #111;
    --dim: #8a8078;
    --dim2: #b0a898;
    --map-bg: #e8e4de;
    --map-land: #d4cfc8;
    --map-land-stroke: #bfb9b0;
    --map-grid: #ddd8d0;
    --green: #007a45;
    --green-glow: #00aa60;
    --nav-bg: rgba(240,237,232,0.94);
    --billboard-bg: #e8e4de;
    --billboard-border: #c0bab2;
    --poe-bg: #f0ede8;
    --feed-hover: #edeae4;
    --feed-selected: #e8e4de;
    --thumb-border: #ccc8c0;
    --scrollbar: #ccc8c0;
    --big-label-color: #ddd8d0;
    --overlay-title: #bfb9b0;
    --logo-color: #111;
  }

  /* ‚îÄ‚îÄ SMOOTH THEME TRANSITIONS ‚îÄ‚îÄ */
  *, *::before, *::after {
    transition:
      background-color 0.3s ease,
      border-color 0.3s ease,
      color 0.3s ease,
      box-shadow 0.3s ease;
  }
  img, canvas, svg, .bb-pin, .bb-pin-dot { transition: none !important; }

  html, body {
    height: 100%;
    background: var(--bg);
    color: var(--text);
    font-family: 'DM Mono', monospace;
    overflow: hidden;
  }

  /* ‚îÄ‚îÄ NAV ‚îÄ‚îÄ */
  nav {
    position: fixed;
    top: 0; left: 0; right: 0;
    z-index: 100;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 24px;
    height: 48px;
    background: var(--nav-bg);
    border-bottom: 1px solid var(--border);
    backdrop-filter: blur(8px);
  }

  .logo {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 22px;
    letter-spacing: 0.12em;
    color: var(--logo-color);
    display: flex;
    align-items: center;
    gap: 8px;
  }
  .logo span { color: var(--accent); }

  .nav-links {
    display: flex;
    gap: 24px;
    list-style: none;
    font-size: 11px;
    letter-spacing: 0.1em;
    text-transform: uppercase;
  }
  .nav-links a {
    color: var(--dim);
    text-decoration: none;
    transition: color 0.15s;
  }
  .nav-links a:hover { color: var(--text); }

  .nav-right {
    display: flex;
    align-items: center;
    gap: 16px;
    font-size: 11px;
  }
  .submit-btn {
    background: var(--accent);
    color: #fff;
    border: none;
    padding: 6px 14px;
    font-family: 'DM Mono', monospace;
    font-size: 11px;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    cursor: pointer;
    transition: opacity 0.15s;
  }
  .submit-btn:hover { opacity: 0.85; }

  /* ‚îÄ‚îÄ LAYOUT ‚îÄ‚îÄ */
  .main-layout {
    display: grid;
    grid-template-columns: 280px 1fr 320px;
    grid-template-rows: 48px 1fr;
    height: 100vh;
    width: 100vw;
  }

  /* ‚îÄ‚îÄ LEFT PANEL: live feed ‚îÄ‚îÄ */
  .feed-panel {
    grid-row: 2;
    grid-column: 1;
    background: var(--surface);
    border-right: 1px solid var(--border);
    overflow: hidden;
    display: flex;
    flex-direction: column;
  }

  .panel-header {
    padding: 14px 16px 10px;
    border-bottom: 1px solid var(--border);
    font-size: 10px;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--dim);
    display: flex;
    align-items: center;
    gap: 8px;
    flex-shrink: 0;
  }
  .live-dot {
    width: 6px; height: 6px;
    background: var(--green);
    border-radius: 50%;
    box-shadow: 0 0 6px var(--green);
    animation: pulse 1.8s ease-in-out infinite;
  }
  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.3; }
  }

  .feed-list {
    overflow-y: auto;
    flex: 1;
    scrollbar-width: thin;
    scrollbar-color: var(--scrollbar) transparent;
  }

  .feed-item {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    padding: 10px 14px;
    border-bottom: 1px solid var(--border-subtle);
    cursor: pointer;
    transition: background 0.1s;
    animation: slideIn 0.4s ease;
  }
  @keyframes slideIn {
    from { opacity: 0; transform: translateY(-8px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .feed-item:hover { background: var(--feed-hover); }

  .feed-punk-thumb {
    width: 36px; height: 36px;
    image-rendering: pixelated;
    flex-shrink: 0;
    border: 1px solid var(--thumb-border);
  }

  .feed-meta {
    flex: 1;
    min-width: 0;
  }
  .feed-punk-id {
    font-size: 12px;
    font-weight: 500;
    color: var(--text-strong);
    white-space: nowrap;
  }
  .feed-location {
    font-size: 10px;
    color: var(--dim);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    margin-top: 2px;
  }
  .feed-time {
    font-size: 9px;
    color: var(--dim2);
    margin-top: 3px;
  }

  .poe-badge {
    font-size: 9px;
    padding: 2px 6px;
    border: 1px solid var(--accent);
    color: var(--accent);
    letter-spacing: 0.08em;
    flex-shrink: 0;
    margin-top: 4px;
  }

  /* ‚îÄ‚îÄ MAP CENTER ‚îÄ‚îÄ */
  .map-panel {
    grid-row: 2;
    grid-column: 2;
    position: relative;
    overflow: hidden;
    background: var(--map-bg);
  }

  .map-container {
    width: 100%;
    height: 100%;
    position: relative;
  }

  /* Leaflet Map */
  #leaflet-map {
    width: 100%;
    height: 100%;
    background: var(--map-bg);
  }

  /* Dark tile filter for dark theme */
  html:not(.light) .leaflet-tile {
    filter: brightness(0.55) saturate(0.4) hue-rotate(180deg) invert(1);
  }
  /* Light theme ‚Äì natural tiles, slightly desaturated */
  html.light .leaflet-tile {
    filter: saturate(0.6) brightness(0.95);
  }

  /* Hide Leaflet attribution branding (keep OSM credit) */
  .leaflet-control-attribution {
    background: rgba(10,10,10,0.7) !important;
    color: #444 !important;
    font-family: 'DM Mono', monospace !important;
    font-size: 8px !important;
    letter-spacing: 0.05em;
    border-radius: 0 !important;
  }
  .leaflet-control-attribution a { color: #555 !important; }

  /* Zoom control styling */
  .leaflet-control-zoom a {
    background: var(--surface) !important;
    color: var(--text) !important;
    border-color: var(--border) !important;
    font-family: 'DM Mono', monospace !important;
    width: 24px !important;
    height: 24px !important;
    line-height: 24px !important;
    font-size: 16px !important;
  }
  .leaflet-control-zoom a:hover {
    background: var(--feed-hover) !important;
    color: var(--text-strong) !important;
  }
  .leaflet-control-zoom {
    border: 1px solid var(--border) !important;
    border-radius: 0 !important;
    box-shadow: none !important;
  }

  .map-overlay-title {
    position: absolute;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    font-family: 'Bebas Neue', sans-serif;
    font-size: 11px;
    letter-spacing: 0.3em;
    color: var(--overlay-title);
    pointer-events: none;
    white-space: nowrap;
  }

  /* map grid lines ‚Äî removed (Leaflet handles map rendering) */

  /* ‚îÄ‚îÄ RIGHT PANEL: detail ‚îÄ‚îÄ */
  .detail-panel {
    grid-row: 2;
    grid-column: 3;
    background: var(--surface);
    border-left: 1px solid var(--border);
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }

  .detail-empty {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 12px;
    padding: 24px;
    text-align: center;
  }
  .detail-empty .big-label {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 32px;
    letter-spacing: 0.1em;
    color: var(--big-label-color);
    line-height: 1;
  }
  .detail-empty p {
    font-size: 11px;
    color: var(--dim);
    line-height: 1.7;
  }

  .detail-content {
    display: none;
    flex-direction: column;
    height: 100%;
  }
  .detail-content.active { display: flex; }

  .detail-img-wrap {
    position: relative;
    background: var(--map-bg);
    border-bottom: 1px solid var(--border);
    padding: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  /* Simulated billboard */
  .billboard-sim {
    position: relative;
    width: 100%;
    max-width: 260px;
  }
  .billboard-frame {
    background: var(--billboard-bg);
    border: 3px solid var(--billboard-border);
    border-radius: 2px;
    padding: 3px;
    position: relative;
  }
  .billboard-frame::before {
    content: '';
    display: block;
    width: 40%;
    height: 6px;
    background: var(--border);
    margin: 0 auto 3px;
    border-radius: 3px 3px 0 0;
  }
  .billboard-screen {
    width: 100%;
    aspect-ratio: 16/9;
    background: var(--map-bg);
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    overflow: hidden;
  }
  .billboard-punk {
    image-rendering: pixelated;
    height: 80%;
    width: auto;
    filter: brightness(1.1) contrast(1.05);
  }
  .billboard-glow {
    position: absolute;
    inset: 0;
    background: radial-gradient(ellipse at center, rgba(255,60,0,0.15) 0%, transparent 70%);
    pointer-events: none;
  }
  .billboard-pole {
    width: 8px;
    height: 30px;
    background: var(--border);
    margin: 0 auto;
  }
  .billboard-base {
    width: 40px;
    height: 5px;
    background: var(--border-subtle);
    margin: 0 auto;
    border-radius: 2px;
  }

  .detail-info {
    padding: 16px;
    flex: 1;
    overflow-y: auto;
    scrollbar-width: thin;
    scrollbar-color: var(--scrollbar) transparent;
  }

  .detail-punk-name {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 28px;
    letter-spacing: 0.08em;
    color: var(--text-strong);
    line-height: 1;
  }

  .detail-loc {
    font-size: 11px;
    color: var(--dim);
    margin-top: 4px;
    margin-bottom: 14px;
  }

  .poe-block {
    background: var(--poe-bg);
    border: 1px solid var(--border);
    padding: 12px;
    margin-bottom: 14px;
  }
  .poe-title {
    font-size: 9px;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--accent);
    margin-bottom: 8px;
  }
  .poe-row {
    display: flex;
    justify-content: space-between;
    font-size: 10px;
    color: var(--dim);
    padding: 3px 0;
    border-bottom: 1px solid var(--border-subtle);
  }
  .poe-row:last-child { border-bottom: none; }
  .poe-row span { color: var(--text); }

  .poe-verified {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    font-size: 10px;
    color: var(--green);
    margin-top: 10px;
  }

  .proof-photo-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 4px;
    margin-top: 12px;
  }
  .proof-photo {
    aspect-ratio: 16/9;
    background: var(--poe-bg);
    border: 1px solid var(--border);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 9px;
    color: var(--dim2);
    letter-spacing: 0.1em;
    cursor: pointer;
    overflow: hidden;
    position: relative;
  }
  .proof-photo canvas {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    opacity: 0.5;
  }
  .proof-photo span { position: relative; z-index: 1; }

  .attr-list {
    margin-top: 12px;
  }
  .attr-tag {
    display: inline-block;
    font-size: 9px;
    padding: 3px 8px;
    border: 1px solid var(--border);
    color: var(--dim);
    margin: 2px 2px 2px 0;
    letter-spacing: 0.05em;
  }

  .detail-actions {
    padding: 12px 16px;
    border-top: 1px solid var(--border);
    display: flex;
    gap: 8px;
    flex-shrink: 0;
  }
  .btn-outline {
    flex: 1;
    background: none;
    border: 1px solid var(--border);
    color: var(--dim);
    font-family: 'DM Mono', monospace;
    font-size: 10px;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    padding: 8px;
    cursor: pointer;
    transition: all 0.15s;
  }
  .btn-outline:hover { border-color: var(--text); color: var(--text); }
  .btn-primary {
    flex: 1;
    background: var(--accent);
    border: 1px solid var(--accent);
    color: #fff;
    font-family: 'DM Mono', monospace;
    font-size: 10px;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    padding: 8px;
    cursor: pointer;
    transition: opacity 0.15s;
  }
  .btn-primary:hover { opacity: 0.85; }

  /* ‚îÄ‚îÄ STATS BAR ‚îÄ‚îÄ */
  .stats-bar {
    grid-row: 1;
    grid-column: 1 / 4;
    display: none; /* hidden, nav takes this row */
  }

  /* counter on map */
  .map-counters {
    position: absolute;
    top: 16px;
    left: 16px;
    display: flex;
    gap: 16px;
    pointer-events: none;
  }
  .counter-pill {
    background: var(--nav-bg);
    border: 1px solid var(--border);
    padding: 5px 12px;
    font-size: 10px;
    letter-spacing: 0.1em;
    color: var(--dim);
    display: flex;
    align-items: center;
    gap: 6px;
  }
  .counter-pill strong { color: var(--text); font-weight: 500; }

  /* ‚îÄ‚îÄ SUBMIT MODAL ‚îÄ‚îÄ */
  .modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.7);
    z-index: 200;
    display: none;
    align-items: center;
    justify-content: center;
    backdrop-filter: blur(4px);
  }
  .modal-overlay.open { display: flex; }

  .modal {
    background: var(--surface);
    border: 1px solid var(--border);
    width: 480px;
    max-width: 90vw;
    max-height: 90vh;
    overflow-y: auto;
    scrollbar-width: thin;
  }

  .modal-header {
    padding: 20px 24px 14px;
    border-bottom: 1px solid var(--border);
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  .modal-title {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 22px;
    letter-spacing: 0.1em;
  }
  .modal-close {
    background: none;
    border: none;
    color: var(--dim);
    font-size: 20px;
    cursor: pointer;
    line-height: 1;
  }
  .modal-close:hover { color: var(--text); }

  .modal-body {
    padding: 20px 24px;
    display: flex;
    flex-direction: column;
    gap: 16px;
  }

  .field-group {
    display: flex;
    flex-direction: column;
    gap: 6px;
  }
  .field-label {
    font-size: 10px;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: var(--dim);
  }
  .field-input {
    background: var(--poe-bg);
    border: 1px solid var(--border);
    color: var(--text);
    font-family: 'DM Mono', monospace;
    font-size: 12px;
    padding: 8px 10px;
    outline: none;
    transition: border-color 0.15s;
    width: 100%;
  }
  .field-input:focus { border-color: var(--accent); }

  .upload-zone {
    border: 1px dashed var(--dim2);
    padding: 24px;
    text-align: center;
    cursor: pointer;
    transition: border-color 0.15s;
    font-size: 11px;
    color: var(--dim);
    line-height: 1.8;
  }
  .upload-zone:hover { border-color: var(--dim); }

  .modal-footer {
    padding: 14px 24px;
    border-top: 1px solid var(--border);
    display: flex;
    gap: 8px;
    justify-content: flex-end;
  }

  /* ‚îÄ‚îÄ LEAFLET CUSTOM TOOLTIP ‚îÄ‚îÄ */
  .pb2-tooltip {
    background: rgba(10,10,10,0.92) !important;
    border: 1px solid #1e1e1e !important;
    border-radius: 0 !important;
    box-shadow: none !important;
    padding: 5px 10px !important;
    color: #d4d4d4 !important;
    font-family: 'DM Mono', monospace !important;
    font-size: 11px !important;
  }
  .pb2-tooltip::before { display: none !important; }
  html.light .pb2-tooltip {
    background: rgba(250,248,245,0.95) !important;
    border-color: #ddd8d0 !important;
    color: #2a2520 !important;
  }

  /* scrollbar styles */
  ::-webkit-scrollbar { width: 4px; }
  ::-webkit-scrollbar-track { background: transparent; }
  ::-webkit-scrollbar-thumb { background: var(--scrollbar); border-radius: 2px; }

  /* ‚îÄ‚îÄ THEME TOGGLE ‚îÄ‚îÄ */
  .theme-toggle {
    background: none;
    border: 1px solid var(--border);
    color: var(--dim);
    font-family: 'DM Mono', monospace;
    font-size: 14px;
    width: 30px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: border-color 0.15s, color 0.15s, transform 0.3s ease;
    flex-shrink: 0;
  }
  .theme-toggle:hover {
    border-color: var(--text);
    color: var(--text);
  }
  .theme-toggle:active { transform: rotate(20deg); }

  /* ‚îÄ‚îÄ LANGUAGE SELECTOR ‚îÄ‚îÄ */
  .lang-selector {
    position: relative;
    flex-shrink: 0;
  }

  .lang-btn {
    background: none;
    border: 1px solid var(--border);
    color: var(--dim);
    font-family: 'DM Mono', monospace;
    font-size: 10px;
    letter-spacing: 0.08em;
    height: 30px;
    padding: 0 8px;
    display: flex;
    align-items: center;
    gap: 5px;
    cursor: pointer;
    transition: border-color 0.15s, color 0.15s;
    white-space: nowrap;
  }
  .lang-btn:hover {
    border-color: var(--text);
    color: var(--text);
  }
  .lang-btn .lang-flag {
    font-size: 16px;
    line-height: 1;
    font-style: normal;
    font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Noto Color Emoji', sans-serif;
    text-transform: none;
    letter-spacing: 0;
  }
  .lang-btn .lang-code {
    font-size: 10px;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    font-family: 'DM Mono', monospace;
  }
  .lang-btn .lang-caret {
    font-size: 8px;
    opacity: 0.4;
    margin-left: 1px;
    transition: transform 0.15s;
    text-transform: none;
  }
  .lang-selector.open .lang-caret {
    transform: rotate(180deg);
  }

  .lang-dropdown {
    display: none;
    position: absolute;
    top: calc(100% + 4px);
    right: 0;
    background: var(--surface);
    border: 1px solid var(--border);
    min-width: 180px;
    z-index: 300;
    box-shadow: 0 8px 24px rgba(0,0,0,0.4);
    max-height: 320px;
    overflow-y: auto;
    scrollbar-width: thin;
    scrollbar-color: var(--scrollbar) transparent;
  }
  .lang-selector.open .lang-dropdown {
    display: block;
  }

  .lang-option {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 8px 12px;
    font-family: 'DM Mono', monospace;
    font-size: 10px;
    letter-spacing: 0.08em;
    color: var(--dim);
    cursor: pointer;
    transition: background 0.1s, color 0.1s;
    border-bottom: 1px solid var(--border-subtle);
  }
  .lang-option .opt-name {
    flex: 1;
    text-transform: uppercase;
    letter-spacing: 0.08em;
  }
  .lang-option:last-child { border-bottom: none; }
  .lang-option:hover {
    background: var(--feed-hover);
    color: var(--text);
  }
  .lang-option.active {
    color: var(--accent);
    background: var(--feed-hover);
  }
  .lang-option .opt-flag {
    font-size: 18px;
    line-height: 1;
    font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Noto Color Emoji', sans-serif;
    font-style: normal;
    text-transform: none;
    letter-spacing: 0;
    flex-shrink: 0;
    width: 22px;
    text-align: center;
  }
  .lang-option .opt-native {
    font-size: 9px;
    color: var(--dim2);
    letter-spacing: 0.04em;
    text-transform: none;
    font-family: 'DM Mono', monospace;
  }

  /* Auto-detected badge */
  .lang-detected {
    font-size: 8px;
    padding: 1px 5px;
    border: 1px solid var(--accent);
    color: var(--accent);
    letter-spacing: 0.06em;
    margin-left: auto;
    flex-shrink: 0;
  }

  /* SVG map variables kept for any future use */

</style>
</head>
<body>

<!-- NAV -->
<nav>
  <div class="logo">pb2<span>.</span>io</div>
  <ul class="nav-links">
    <li><a href="#">map</a></li>
    <li><a href="#">exhibitions</a></li>
    <li><a href="#">punks</a></li>
    <li><a href="#">poe archive</a></li>
    <li><a href="#">about</a></li>
  </ul>
  <div class="nav-right">
    <!-- Language Selector -->
    <div class="lang-selector" id="langSelector">
      <button class="lang-btn" id="langBtn" onclick="toggleLangDropdown()">
        <span class="lang-flag" id="langFlag">üåê</span>
        <span class="lang-code" id="langCode">EN</span>
        <span class="lang-caret">‚ñº</span>
      </button>
      <div class="lang-dropdown" id="langDropdown"></div>
    </div>

    <button class="theme-toggle" id="themeToggle" title="Toggle light/dark theme">‚òÄ</button>
    <button class="submit-btn" onclick="openModal()">+ submit exhibition</button>
  </div>
</nav>

<!-- MAIN LAYOUT -->
<div class="main-layout">

  <!-- LEFT: LIVE FEED -->
  <aside class="feed-panel">
    <div class="panel-header">
      <div class="live-dot"></div>
      recent exhibitions
    </div>
    <div class="feed-list" id="feedList"></div>
  </aside>

  <!-- CENTER: MAP -->
  <main class="map-panel">
    <div class="map-container">
      <div id="leaflet-map"></div>

      <!-- Counters -->
      <div class="map-counters">
        <div class="counter-pill"><strong id="totalCount">0</strong> exhibitions</div>
        <div class="counter-pill"><strong id="countryCount">0</strong> countries</div>
        <div class="counter-pill"><strong id="poeCount">0</strong> POEs verified</div>
      </div>

      <div class="map-overlay-title">pb2.io ‚Äî punks on billboards worldwide</div>
    </div>
  </main>

  <!-- RIGHT: DETAIL -->
  <aside class="detail-panel">
    <div class="panel-header">
      exhibition detail
    </div>
    <div class="detail-empty" id="detailEmpty">
      <div class="big-label">SELECT<br>A PUNK</div>
      <p>Click any pin on the map or<br>an item in the feed to view<br>exhibition details & POE.</p>
    </div>
    <div class="detail-content" id="detailContent">
      <div class="detail-img-wrap">
        <div class="billboard-sim">
          <div class="billboard-frame">
            <div class="billboard-screen">
              <img id="punkImg" class="billboard-punk" alt="CryptoPunk" style="image-rendering:pixelated;height:80%;width:auto;" />
              <div class="billboard-glow"></div>
            </div>
          </div>
          <div class="billboard-pole"></div>
          <div class="billboard-base"></div>
        </div>
      </div>
      <div class="detail-info">
        <div class="detail-punk-name" id="detailPunkName">PUNK #0000</div>
        <div class="detail-loc" id="detailLoc">üìç ‚Äî</div>

        <div class="poe-block">
          <div class="poe-title">Proof of Exhibition</div>
          <div class="poe-row">Date <span id="poeDate">‚Äî</span></div>
          <div class="poe-row">Country <span id="poeCountry">‚Äî</span></div>
          <div class="poe-row">Billboard <span id="poeBillboard">‚Äî</span></div>
          <div class="poe-row">Duration <span id="poeDuration">‚Äî</span></div>
          <div class="poe-row">Operator <span id="poeOperator">‚Äî</span></div>
          <div class="poe-row">TX Hash <span id="poeTx" style="font-size:9px;color:#555">‚Äî</span></div>
          <div class="poe-verified" id="poeVerified">
            <div class="live-dot" style="background:var(--green)"></div>
            POE Verified On-Chain
          </div>
        </div>

        <div style="font-size:10px;letter-spacing:0.12em;text-transform:uppercase;color:var(--dim);margin-bottom:6px;">Proof Photos</div>
        <div class="proof-photo-grid" id="proofGrid"></div>

        <div class="attr-list" id="attrList"></div>
      </div>
      <div class="detail-actions">
        <button class="btn-outline">Share</button>
        <button class="btn-primary">Mint POE</button>
      </div>
    </div>
  </aside>

</div>

<!-- SUBMIT MODAL -->
<div class="modal-overlay" id="modalOverlay" onclick="closeModalOut(event)">
  <div class="modal">
    <div class="modal-header">
      <div class="modal-title">Submit Exhibition</div>
      <button class="modal-close" onclick="closeModal()">√ó</button>
    </div>
    <div class="modal-body">
      <div style="font-size:11px;color:var(--dim);line-height:1.7;">
        Submit your CryptoPunk billboard exhibition to be verified and archived globally. All submissions are reviewed and issued a Proof of Exhibition (POE).
      </div>
      <div class="field-group">
        <div class="field-label">CryptoPunk ID</div>
        <input class="field-input" type="text" placeholder="e.g. 3100" />
      </div>
      <div class="field-group">
        <div class="field-label">Wallet Address (owner verification)</div>
        <input class="field-input" type="text" placeholder="0x..." />
      </div>
      <div class="field-group">
        <div class="field-label">Billboard Location</div>
        <input class="field-input" type="text" placeholder="City, Country" />
      </div>
      <div class="field-group">
        <div class="field-label">Billboard Operator / Vendor</div>
        <input class="field-input" type="text" placeholder="e.g. Clear Channel, Lamar, independent" />
      </div>
      <div class="field-group">
        <div class="field-label">Exhibition Dates</div>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;">
          <input class="field-input" type="date" />
          <input class="field-input" type="date" />
        </div>
      </div>
      <div class="field-group">
        <div class="field-label">Proof Photos (min. 2 required)</div>
        <div class="upload-zone">
          Drop photos here or click to upload<br>
          <span style="font-size:9px;color:#333">JPG, PNG ¬∑ Max 10MB each ¬∑ GPS metadata appreciated</span>
        </div>
      </div>
      <div class="field-group">
        <div class="field-label">Additional Notes</div>
        <textarea class="field-input" rows="3" style="resize:vertical;"></textarea>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn-outline" onclick="closeModal()" style="flex:none;padding:8px 18px;">Cancel</button>
      <button class="btn-primary" style="flex:none;padding:8px 18px;">Submit for Review</button>
    </div>
  </div>
</div>

<script>
// ‚îÄ‚îÄ DATA ‚îÄ‚îÄ
// Countries in network (from Artcrush x NEORT pitch deck):
// Japan (1000 screens), India (4000), Germany (3000), Netherlands (2810),
// Indonesia (1000), Belgium (750), Finland (700), Spain & Portugal (500),
// England (460), Romania (140), Jordan (100), South Africa (45), Italy (14)
// 17,500+ screens across 11 countries, scaling to 20,000+ by end of 2026

const EXHIBITIONS = [
  // ‚îÄ‚îÄ JAPAN ‚îÄ‚îÄ
  { id: 1,  punk: 7804, loc: "Miyashita Park, Shibuya, Tokyo, Japan",       city: "Tokyo",       country: "Japan",        date: "2026-01-10", billboard: "NEORT / Miyashita Park (34 screens)",        duration: "2 weeks",  operator: "NEORT x Artcrush",      tx: "0x4d1a...c82e", verified: true,  attrs: ["Alien", "Cap Forward", "Small Shades", "Pipe"], mapX: 808, mapY: 118 },
  { id: 2,  punk: 3100, loc: "Toranomon Hills NODE, Tokyo, Japan",           city: "Tokyo",       country: "Japan",        date: "2026-09-15", billboard: "NEORT / Tokyo NODE (5 screens)",             duration: "1 week",   operator: "NEORT x ETH Global",    tx: "0x3f8b...a21d", verified: true,  attrs: ["Alien", "Headband"],                            mapX: 812, mapY: 122 },
  { id: 3,  punk: 9527, loc: "Ikebukuro Station, Tokyo, Japan",              city: "Tokyo",       country: "Japan",        date: "2025-11-20", billboard: "NEORT / Ikebukuro Digital",                  duration: "72hrs",    operator: "@danpolko",             tx: "0x7c2e...1f4a", verified: true,  attrs: ["Male", "Knitted Cap", "Pipe"],                  mapX: 810, mapY: 115 },

  // ‚îÄ‚îÄ INDIA ‚îÄ‚îÄ
  { id: 4,  punk: 2560, loc: "Cyber City, Gurugram, India",                  city: "Gurugram",    country: "India",        date: "2026-02-14", billboard: "Artcrush / Cyber City Hub",                  duration: "1 week",   operator: "Artcrush India",        tx: "0x9a3c...7b1e", verified: true,  attrs: ["Male", "Headband", "Big Shades"],               mapX: 625, mapY: 152 },
  { id: 5,  punk: 8348, loc: "Connaught Place, New Delhi, India",            city: "New Delhi",   country: "India",        date: "2026-02-18", billboard: "Artcrush / CP Digital Wall",                 duration: "5 days",   operator: "Artcrush India",        tx: "0xb4d7...2c9f", verified: true,  attrs: ["Female", "Crazy Hair", "Purple Eye Shadow"],    mapX: 618, mapY: 148 },
  { id: 6,  punk: 5217, loc: "Bandra-Kurla Complex, Mumbai, India",          city: "Mumbai",      country: "India",        date: "2026-03-01", billboard: "Artcrush / BKC Screens",                     duration: "4 days",   operator: "Artcrush India",        tx: "0xe1f2...4a8d", verified: false, attrs: ["Female", "Wild Blonde", "Earring"],             mapX: 614, mapY: 162 },

  // ‚îÄ‚îÄ GERMANY ‚îÄ‚îÄ
  { id: 7,  punk: 42,   loc: "Alexanderplatz, Berlin, Germany",             city: "Berlin",      country: "Germany",      date: "2025-12-05", billboard: "Str√∂er / Alexanderplatz",                    duration: "48hrs",    operator: "Artcrush x Str√∂er",     tx: "0xf7d2...1b9a", verified: true,  attrs: ["Male", "Frumpy Hair", "Chinstrap"],             mapX: 468, mapY: 80 },
  { id: 8,  punk: 1190, loc: "Hauptbahnhof, Munich, Germany",               city: "Munich",      country: "Germany",      date: "2025-12-20", billboard: "APG|SGA / M√ºnchen Hbf",                     duration: "120hrs",   operator: "ETH Z√ºrich Crypto Art", tx: "0x3a8d...e6f1", verified: true,  attrs: ["Male", "Do-rag", "3D Glasses"],                 mapX: 471, mapY: 85 },
  { id: 9,  punk: 4156, loc: "Cologne Cathedral Square, Germany",           city: "Cologne",     country: "Germany",      date: "2026-01-15", billboard: "Str√∂er / K√∂ln Dom",                          duration: "36hrs",    operator: "Artcrush Germany",      tx: "0x2c7a...9e3f", verified: false, attrs: ["Ape", "Police Cap", "Pipe"],                    mapX: 461, mapY: 82 },

  // ‚îÄ‚îÄ NETHERLANDS ‚îÄ‚îÄ
  { id: 10, punk: 6529, loc: "Rotterdam Centraal, Netherlands",             city: "Rotterdam",   country: "Netherlands",  date: "2025-11-28", billboard: "Artcrush / Rotterdam Centraal (Linda Dounia)", duration: "1 week",   operator: "Artcrush x NS Media",   tx: "0x5e9c...3d7b", verified: true,  attrs: ["Female", "Tiara", "Purple Eye Shadow"],         mapX: 448, mapY: 82 },
  { id: 11, punk: 2890, loc: "Leidseplein, Amsterdam, Netherlands",         city: "Amsterdam",   country: "Netherlands",  date: "2026-01-22", billboard: "JCDecaux / Leidseplein",                     duration: "72hrs",    operator: "Punk #2890 owner",      tx: "0xb3e7...0d5f", verified: false, attrs: ["Male", "Cap", "Nerd Glasses"],                  mapX: 446, mapY: 80 },

  // ‚îÄ‚îÄ INDONESIA ‚îÄ‚îÄ
  { id: 12, punk: 9918, loc: "Sudirman CBD, Jakarta, Indonesia",            city: "Jakarta",     country: "Indonesia",    date: "2026-02-05", billboard: "Artcrush / Sudirman Digital Tower",          duration: "5 days",   operator: "@dxbcryptopunk",        tx: "0x6b1c...d4e8", verified: true,  attrs: ["Female", "Red Mohawk", "Clown Eyes Green"],     mapX: 726, mapY: 213 },
  { id: 13, punk: 3831, loc: "Seminyak, Bali, Indonesia",                   city: "Bali",        country: "Indonesia",    date: "2026-02-12", billboard: "Artcrush / Bali Digital Hub",                duration: "48hrs",    operator: "Artcrush SEA",          tx: "0x7d3f...c12a", verified: false, attrs: ["Male", "Mohawk Dark", "Horned Rim Glasses"],    mapX: 734, mapY: 220 },

  // ‚îÄ‚îÄ BELGIUM ‚îÄ‚îÄ
  { id: 14, punk: 5822, loc: "Grand Place, Brussels, Belgium",              city: "Brussels",    country: "Belgium",      date: "2025-12-15", billboard: "Artcrush / Grand Place Digital",             duration: "60hrs",    operator: "Artcrush Belgium",      tx: "0xc1d8...7b2a", verified: true,  attrs: ["Male", "Mohawk Dark", "Eye Patch"],             mapX: 448, mapY: 84 },
  { id: 15, punk: 7252, loc: "Antwerp Central Station, Belgium",            city: "Antwerp",     country: "Belgium",      date: "2026-01-18", billboard: "Artcrush / Antwerp Centraal",                duration: "3 days",   operator: "Artcrush Belgium",      tx: "0xa2e5...8f1c", verified: false, attrs: ["Zombie", "Wild Hair"],                          mapX: 446, mapY: 83 },

  // ‚îÄ‚îÄ FINLAND ‚îÄ‚îÄ
  { id: 16, punk: 1422, loc: "Kamppi Centre, Helsinki, Finland",            city: "Helsinki",    country: "Finland",      date: "2026-01-08", billboard: "Artcrush / Kamppi Digital",                  duration: "4 days",   operator: "Artcrush Nordic",       tx: "0xd4b9...5e2c", verified: true,  attrs: ["Female", "Straight Hair Dark", "Earring"],     mapX: 482, mapY: 60 },
  { id: 17, punk: 8765, loc: "Rautatientori, Helsinki, Finland",            city: "Helsinki",    country: "Finland",      date: "2026-02-22", billboard: "JCDecaux / Helsinki Railway Square",         duration: "48hrs",    operator: "Artcrush Nordic",       tx: "0xf3a1...7d4b", verified: false, attrs: ["Male", "Cap", "Big Shades"],                    mapX: 484, mapY: 58 },

  // ‚îÄ‚îÄ SPAIN ‚îÄ‚îÄ
  { id: 18, punk: 635,  loc: "Puerta del Sol, Madrid, Spain",               city: "Madrid",      country: "Spain",        date: "2025-12-18", billboard: "Artcrush / Sol Digital",                     duration: "4 days",   operator: "Artcrush Iberia",       tx: "0xe9a2...4c1b", verified: true,  attrs: ["Female", "Wild Blonde", "Purple Eye Shadow"],  mapX: 427, mapY: 100 },
  { id: 19, punk: 4464, loc: "La Rambla, Barcelona, Spain",                 city: "Barcelona",   country: "Spain",        date: "2026-01-25", billboard: "JCDecaux / Las Ramblas",                     duration: "3 days",   operator: "Artcrush Iberia",       tx: "0x1b8d...f3a9", verified: false, attrs: ["Male", "Fedora", "Nerd Glasses"],               mapX: 438, mapY: 99 },

  // ‚îÄ‚îÄ PORTUGAL ‚îÄ‚îÄ
  { id: 20, punk: 2243, loc: "Marqu√™s de Pombal, Lisbon, Portugal",         city: "Lisbon",      country: "Portugal",     date: "2026-02-10", billboard: "Artcrush / Marqu√™s Digital",                 duration: "72hrs",    operator: "Artcrush Iberia",       tx: "0x8c4f...2e1d", verified: true,  attrs: ["Female", "Mohawk Thin", "Hot Lipstick"],        mapX: 418, mapY: 101 },

  // ‚îÄ‚îÄ ENGLAND ‚îÄ‚îÄ
  { id: 21, punk: 8348, loc: "Piccadilly Circus, London, England",          city: "London",      country: "England",      date: "2025-12-08", billboard: "Ocean Outdoor / Piccadilly Lights",          duration: "24hrs",    operator: "CryptoPunks London",    tx: "0x9f2c...1a4d", verified: true,  attrs: ["Female", "Crazy Hair", "Purple Eye Shadow"],   mapX: 403, mapY: 83 },
  { id: 22, punk: 6965, loc: "Piccadilly Circus, London, England",          city: "London",      country: "England",      date: "2026-01-30", billboard: "Ocean Outdoor / Piccadilly Lights",          duration: "48hrs",    operator: "@ekaitza.eth",          tx: "0x4a6e...9c3d", verified: true,  attrs: ["Ape", "Fedora"],                               mapX: 404, mapY: 84 },
  { id: 23, punk: 3443, loc: "Manchester Piccadilly, England",              city: "Manchester",  country: "England",      date: "2026-02-20", billboard: "Artcrush / Manchester Piccadilly",           duration: "3 days",   operator: "Artcrush UK",           tx: "0x2d9b...e5f7", verified: false, attrs: ["Male", "Stringy Tailed Hair", "Earring"],      mapX: 401, mapY: 80 },

  // ‚îÄ‚îÄ ROMANIA ‚îÄ‚îÄ
  { id: 24, punk: 5831, loc: "Movieplex Mall, Bucharest, Romania",          city: "Bucharest",   country: "Romania",      date: "2025-10-14", billboard: "Artcrush / Movieplex Bucharest",             duration: "1 week",   operator: "Artcrush x ALPER",      tx: "0x6e2c...b8a1", verified: true,  attrs: ["Male", "Mohawk Dark", "Regular Shades"],       mapX: 492, mapY: 89 },
  { id: 25, punk: 9082, loc: "Floreasca City Center, Bucharest, Romania",   city: "Bucharest",   country: "Romania",      date: "2026-01-12", billboard: "Artcrush / Floreasca Digital",               duration: "5 days",   operator: "Artcrush Romania",      tx: "0x3f7d...c4b2", verified: false, attrs: ["Female", "Blonde Bob", "Green Eye Shadow"],    mapX: 493, mapY: 90 },

  // ‚îÄ‚îÄ JORDAN ‚îÄ‚îÄ
  { id: 26, punk: 7121, loc: "Abdali Boulevard, Amman, Jordan",             city: "Amman",       country: "Jordan",       date: "2026-02-08", billboard: "Artcrush / Abdali Digital Walk",             duration: "4 days",   operator: "Artcrush MENA",         tx: "0x5c8a...1f3e", verified: true,  attrs: ["Male", "Hoodie", "VR"],                        mapX: 524, mapY: 135 },

  // ‚îÄ‚îÄ SOUTH AFRICA ‚îÄ‚îÄ
  { id: 27, punk: 4930, loc: "V&A Waterfront, Cape Town, South Africa",     city: "Cape Town",   country: "South Africa", date: "2026-01-20", billboard: "Artcrush / Waterfront Digital",              duration: "3 days",   operator: "Artcrush Africa",       tx: "0x9e1b...d7c4", verified: true,  attrs: ["Female", "Tassle Hat", "Hot Lipstick"],        mapX: 470, mapY: 352 },

  // ‚îÄ‚îÄ ITALY ‚îÄ‚îÄ
  { id: 28, punk: 2046, loc: "Piazza del Duomo, Milan, Italy",              city: "Milan",       country: "Italy",        date: "2026-03-05", billboard: "Artcrush / Duomo Digital",                   duration: "48hrs",    operator: "Artcrush Italy",        tx: "0xc7f3...8a2e", verified: false, attrs: ["Male", "Peak Spike Hair", "Big Shades"],       mapX: 462, mapY: 92 },
];

// ‚îÄ‚îÄ PUNK IMAGE VIA PUNKS.ART API ‚îÄ‚îÄ
// Returns the URL for a real CryptoPunk PNG image
function punkImgUrl(punkId, size = 100) {
  return `https://punks.art/api/punks/${punkId}?format=png&size=${size}&background=punk`;
}

// Sets an <img> element to show the real punk, with pixelated rendering
function setPunkImg(imgEl, punkId, size = 100) {
  imgEl.src = punkImgUrl(punkId, size);
  imgEl.style.imageRendering = 'pixelated';
  imgEl.style.width = '100%';
  imgEl.style.height = '100%';
  imgEl.style.objectFit = 'contain';
}

// Legacy shim ‚Äî canvas elements are replaced by <img> in feed + detail
function drawPunk(canvas, punkId, attrs) {
  // no-op: replaced by real images
}

// ‚îÄ‚îÄ LEAFLET MAP ‚îÄ‚îÄ
// Add real lat/lng to exhibitions (mapped from pitch deck locations)
const LAT_LNG = {
  1:  [35.6580, 139.7016],  // Miyashita Park, Shibuya
  2:  [35.6671, 139.7491],  // Toranomon Hills
  3:  [35.7295, 139.7109],  // Ikebukuro
  4:  [28.4949, 77.0910],   // Gurugram
  5:  [28.6139, 77.2090],   // New Delhi
  6:  [19.0596, 72.8295],   // Mumbai BKC
  7:  [52.5200, 13.4050],   // Berlin Alexanderplatz
  8:  [48.1402, 11.5600],   // Munich Hbf
  9:  [50.9384, 6.9570],    // Cologne Dom
  10: [51.9226, 4.4792],    // Rotterdam Centraal
  11: [52.3641, 4.9006],    // Amsterdam Leidseplein
  12: [-6.2088, 106.8456],  // Jakarta Sudirman
  13: [-8.6705, 115.2126],  // Bali Seminyak
  14: [50.8467, 4.3517],    // Brussels Grand Place
  15: [51.2167, 4.4210],    // Antwerp Centraal
  16: [60.1699, 24.9384],   // Helsinki Kamppi
  17: [60.1719, 24.9414],   // Helsinki Rautatientori
  18: [40.4168, -3.7038],   // Madrid Puerta del Sol
  19: [41.3810, 2.1734],    // Barcelona La Rambla
  20: [38.7169, -9.1399],   // Lisbon Marqu√™s
  21: [51.5098, -0.1342],   // London Piccadilly
  22: [51.5098, -0.1342],   // London Piccadilly (offset below)
  23: [53.4808, -2.2426],   // Manchester Piccadilly
  24: [44.4268, 26.1025],   // Bucharest Movieplex
  25: [44.4550, 26.0850],   // Bucharest Floreasca
  26: [31.9522, 35.9312],   // Amman Abdali
  27: [-33.9015, 18.4200],  // Cape Town V&A
  28: [45.4641, 9.1908],    // Milan Duomo
};

// Attach lat/lng to each exhibition
EXHIBITIONS.forEach(ex => {
  if (LAT_LNG[ex.id]) {
    ex.lat = LAT_LNG[ex.id][0];
    ex.lng = LAT_LNG[ex.id][1];
  }
});

// Slight offset for co-located pins (same venue, different punks)
const OFFSETS = { 22: [0.0008, 0.0008], 17: [0.001, 0.001], 25: [0.003, 0.003] };

// Init Leaflet
const leafletMap = L.map('leaflet-map', {
  center: [30, 20],
  zoom: 2,
  minZoom: 2,
  maxZoom: 16,
  zoomControl: true,
  attributionControl: true,
  worldCopyJump: true,
});

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  attribution: '¬© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',
  maxZoom: 19,
}).addTo(leafletMap);

// Custom SVG marker factory
function makeMarkerIcon(verified) {
  const color = verified ? '#00cc70' : '#ff3c00';
  const glow = verified ? '#00ff88' : '#ff3c00';
  const svg = `
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="32" viewBox="0 0 24 32">
      <circle cx="12" cy="10" r="8" fill="${color}" opacity="0.18"/>
      <circle cx="12" cy="10" r="5" fill="${color}" filter="drop-shadow(0 0 4px ${glow})"/>
      <line x1="12" y1="15" x2="12" y2="28" stroke="${color}" stroke-width="1.5" opacity="0.6"/>
    </svg>`;
  return L.divIcon({
    html: svg,
    className: '',
    iconSize: [24, 32],
    iconAnchor: [12, 28],
    popupAnchor: [0, -28],
  });
}

// Add markers
const leafletMarkers = {};
EXHIBITIONS.forEach(ex => {
  if (!ex.lat || !ex.lng) return;
  const offset = OFFSETS[ex.id] || [0, 0];
  const latlng = [ex.lat + offset[0], ex.lng + offset[1]];

  const marker = L.marker(latlng, { icon: makeMarkerIcon(ex.verified) });

  marker.bindTooltip(
    `<span style="font-family:'DM Mono',monospace;font-size:11px;letter-spacing:0.06em"><strong>PUNK #${ex.punk}</strong> ¬∑ ${ex.city}, ${ex.country}</span>`,
    { direction: 'top', offset: [0, -4], className: 'pb2-tooltip' }
  );

  marker.on('click', () => {
    showDetail(ex.id);
    leafletMap.flyTo(latlng, Math.max(leafletMap.getZoom(), 10), { duration: 0.8 });
  });

  marker.addTo(leafletMap);
  leafletMarkers[ex.id] = marker;
});

// ‚îÄ‚îÄ RENDER FEED ‚îÄ‚îÄ
const feedList = document.getElementById('feedList');

function createFeedItem(ex) {
  const div = document.createElement('div');
  div.className = 'feed-item';
  div.dataset.id = ex.id;
  
  const img = document.createElement('img');
  img.className = 'feed-punk-thumb';
  img.style.imageRendering = 'pixelated';
  img.src = punkImgUrl(ex.punk, 36);
  img.alt = `Punk #${ex.punk}`;
  
  const meta = document.createElement('div');
  meta.className = 'feed-meta';
  
  const timeAgo = getTimeAgo(ex.date);
  meta.innerHTML = `
    <div class="feed-punk-id">PUNK #${ex.punk}</div>
    <div class="feed-location">${ex.loc}</div>
    <div class="feed-time">${timeAgo}</div>
  `;
  
  div.appendChild(img);
  div.appendChild(meta);
  
  if (ex.verified) {
    const badge = document.createElement('div');
    badge.className = 'poe-badge';
    badge.textContent = 'POE';
    meta.appendChild(badge);
  }
  
  div.addEventListener('click', () => showDetail(ex.id));
  return div;
}

function getTimeAgo(dateStr) {
  const d = new Date(dateStr);
  const now = new Date('2025-12-25');
  const diff = Math.floor((now - d) / (1000 * 60 * 60 * 24));
  if (diff === 0) return 'today';
  if (diff === 1) return '1 day ago';
  return `${diff} days ago`;
}

// Populate feed (newest first)
const sorted = [...EXHIBITIONS].sort((a,b) => b.id - a.id);
sorted.forEach(ex => feedList.appendChild(createFeedItem(ex)));

// Update counters
document.getElementById('totalCount').textContent = EXHIBITIONS.length;
document.getElementById('countryCount').textContent = new Set(EXHIBITIONS.map(e => e.country)).size;
document.getElementById('poeCount').textContent = EXHIBITIONS.filter(e => e.verified).length;

// ‚îÄ‚îÄ SHOW DETAIL ‚îÄ‚îÄ
function showDetail(id) {
  const ex = EXHIBITIONS.find(e => e.id === id);
  if (!ex) return;
  
  document.getElementById('detailEmpty').style.display = 'none';
  const dc = document.getElementById('detailContent');
  dc.classList.add('active');
  
  // Set real punk image in billboard
  const punkImg = document.getElementById('punkImg');
  punkImg.src = punkImgUrl(ex.punk, 200);
  
  document.getElementById('detailPunkName').textContent = `PUNK #${ex.punk}`;
  document.getElementById('detailLoc').textContent = `üìç ${ex.loc}`;
  document.getElementById('poeDate').textContent = ex.date;
  document.getElementById('poeCountry').textContent = ex.country;
  document.getElementById('poeBillboard').textContent = ex.billboard;
  document.getElementById('poeDuration').textContent = ex.duration;
  document.getElementById('poeOperator').textContent = ex.operator;
  document.getElementById('poeTx').textContent = ex.tx;
  
  const poeVerified = document.getElementById('poeVerified');
  if (ex.verified) {
    poeVerified.style.display = 'flex';
  } else {
    poeVerified.style.display = 'none';
  }
  
  // Proof photos ‚Äî mini billboard scenes with real punk images
  const grid = document.getElementById('proofGrid');
  grid.innerHTML = '';
  const shotLabels = ['street view', 'night shot', 'wide angle', 'close-up'];
  for (let i = 0; i < 4; i++) {
    const div = document.createElement('div');
    div.className = 'proof-photo';
    div.style.position = 'relative';
    div.style.overflow = 'hidden';
    div.style.background = `hsl(${(ex.id * 37 + i * 70) % 360},15%,7%)`;

    // Simulated scene canvas (background atmosphere)
    const c = document.createElement('canvas');
    c.width = 160; c.height = 90;
    const ctx = c.getContext('2d');
    const hue = (ex.id * 37 + i * 70) % 360;
    ctx.fillStyle = `hsl(${hue},15%,6%)`;
    ctx.fillRect(0, 0, 160, 90);
    // atmospheric gradient
    for (let y = 0; y < 90; y++) {
      ctx.globalAlpha = 0.04;
      ctx.fillStyle = `hsl(${hue + 30},40%,${18 + y / 3}%)`;
      ctx.fillRect(0, y, 160, 1);
    }
    ctx.globalAlpha = 1;
    // billboard frame
    ctx.fillStyle = '#0e0e0e';
    ctx.fillRect(42, 12, 76, 44);
    ctx.strokeStyle = '#2a2a2a';
    ctx.lineWidth = 1;
    ctx.strokeRect(42, 12, 76, 44);
    // inner screen glow
    const grd = ctx.createRadialGradient(80, 34, 2, 80, 34, 38);
    grd.addColorStop(0, 'rgba(255,60,0,0.12)');
    grd.addColorStop(1, 'transparent');
    ctx.fillStyle = grd;
    ctx.fillRect(42, 12, 76, 44);
    // pole
    ctx.fillStyle = '#1a1a1a';
    ctx.fillRect(78, 56, 4, 22);
    ctx.fillStyle = '#161616';
    ctx.fillRect(64, 78, 32, 4);
    // noise
    for (let n = 0; n < 300; n++) {
      ctx.fillStyle = `rgba(255,255,255,${Math.random() * 0.025})`;
      ctx.fillRect(Math.random() * 160, Math.random() * 90, 1, 1);
    }
    c.style.position = 'absolute';
    c.style.inset = '0';
    c.style.width = '100%';
    c.style.height = '100%';
    div.appendChild(c);

    // Real punk image inside the billboard
    const punkThumb = document.createElement('img');
    punkThumb.src = punkImgUrl(ex.punk, 48);
    punkThumb.style.cssText = `
      position:absolute;
      left:50px; top:16px;
      width:60px; height:36px;
      object-fit:contain;
      image-rendering:pixelated;
      z-index:2;
    `;
    div.appendChild(punkThumb);

    const label = document.createElement('span');
    label.textContent = shotLabels[i];
    label.style.cssText = 'position:absolute;bottom:4px;right:6px;z-index:3;font-size:8px;color:#333;letter-spacing:0.08em;';
    div.appendChild(label);
    grid.appendChild(div);
  }
  
  // Attributes
  const attrList = document.getElementById('attrList');
  attrList.innerHTML = `<div style="font-size:10px;letter-spacing:0.12em;text-transform:uppercase;color:var(--dim);margin-bottom:6px;margin-top:12px;">Attributes</div>`;
  ex.attrs.forEach(a => {
    const span = document.createElement('span');
    span.className = 'attr-tag';
    span.textContent = a;
    attrList.appendChild(span);
  });
  
  // Highlight feed item
  document.querySelectorAll('.feed-item').forEach(el => el.style.background = '');
  const feedItem = document.querySelector(`.feed-item[data-id="${id}"]`);
  if (feedItem) {
    feedItem.style.background = 'var(--feed-selected)';
    feedItem.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
  }

  // Pan Leaflet map to marker
  if (ex.lat && leafletMarkers[id]) {
    const offset = OFFSETS[id] || [0, 0];
    leafletMap.flyTo([ex.lat + offset[0], ex.lng + offset[1]], Math.max(leafletMap.getZoom(), 10), { duration: 0.8 });
  }
}

// Auto-select first ‚Äî defer so Leaflet tiles have loaded
setTimeout(() => showDetail(1), 300);

// ‚îÄ‚îÄ MODAL ‚îÄ‚îÄ
function openModal() {
  document.getElementById('modalOverlay').classList.add('open');
}
function closeModal() {
  document.getElementById('modalOverlay').classList.remove('open');
}
function closeModalOut(e) {
  if (e.target === document.getElementById('modalOverlay')) closeModal();
}

// ‚îÄ‚îÄ SIMULATE LIVE UPDATES ‚îÄ‚îÄ
let newPunkIds = [9999, 4206, 1111, 5678];
let cityPool = ['Jakarta, Indonesia', 'Chennai, India', 'Rotterdam, Netherlands', 'Bucharest, Romania'];
let countryPool = ['Indonesia', 'India', 'Netherlands', 'Romania'];
let mapXPool = [726, 630, 448, 492];
let mapYPool = [213, 155, 82, 90];
let idx = 0;
setInterval(() => {
  if (idx >= newPunkIds.length) return;
  const fakeEx = {
    id: 100 + idx,
    punk: newPunkIds[idx],
    loc: cityPool[idx % cityPool.length],
    city: cityPool[idx % cityPool.length].split(',')[0],
    country: countryPool[idx % countryPool.length],
    date: '2026-02-23',
    verified: false,
    attrs: [],
  };
  const item = createFeedItem(fakeEx);
  feedList.insertBefore(item, feedList.firstChild);
  item.style.background = '#1a1500';
  setTimeout(() => { item.style.background = ''; }, 2000);
  document.getElementById('totalCount').textContent = EXHIBITIONS.length + idx + 1;
  idx++;
}, 12000);
// ‚îÄ‚îÄ LANGUAGE SELECTOR ‚îÄ‚îÄ

const LANGUAGES = [
  // Countries in the Artcrush/NEORT network
  { code: 'EN', name: 'English',    native: 'English',    flag: 'üá¨üáß', countries: ['GB', 'US', 'AU', 'NZ', 'CA', 'IE', 'ZA', 'NG', 'IN', 'SG', 'JO'] },
  { code: 'JA', name: 'Japanese',   native: 'Êó•Êú¨Ë™û',      flag: 'üáØüáµ', countries: ['JP'] },
  { code: 'DE', name: 'German',     native: 'Deutsch',    flag: 'üá©üá™', countries: ['DE', 'AT', 'CH'] },
  { code: 'NL', name: 'Dutch',      native: 'Nederlands', flag: 'üá≥üá±', countries: ['NL', 'BE', 'SR'] },
  { code: 'ID', name: 'Indonesian', native: 'Bahasa Indonesia', flag: 'üáÆüá©', countries: ['ID'] },
  { code: 'FR', name: 'French',     native: 'Fran√ßais',   flag: 'üá´üá∑', countries: ['FR', 'BE', 'LU', 'CI', 'SN'] },
  { code: 'FI', name: 'Finnish',    native: 'Suomi',      flag: 'üá´üáÆ', countries: ['FI'] },
  { code: 'ES', name: 'Spanish',    native: 'Espa√±ol',    flag: 'üá™üá∏', countries: ['ES', 'MX', 'AR', 'CO', 'CL', 'PE', 'VE'] },
  { code: 'PT', name: 'Portuguese', native: 'Portugu√™s',  flag: 'üáµüáπ', countries: ['PT', 'BR', 'AO', 'MZ'] },
  { code: 'RO', name: 'Romanian',   native: 'Rom√¢nƒÉ',     flag: 'üá∑üá¥', countries: ['RO', 'MD'] },
  { code: 'AR', name: 'Arabic',     native: 'ÿßŸÑÿπÿ±ÿ®Ÿäÿ©',    flag: 'üáØüá¥', countries: ['JO', 'SA', 'AE', 'EG', 'IQ', 'MA'] },
  { code: 'HI', name: 'Hindi',      native: '‡§π‡§ø‡§®‡•ç‡§¶‡•Ä',      flag: 'üáÆüá≥', countries: ['IN'] },
  { code: 'IT', name: 'Italian',    native: 'Italiano',   flag: 'üáÆüáπ', countries: ['IT', 'SM', 'VA'] },
  { code: 'KO', name: 'Korean',     native: 'ÌïúÍµ≠Ïñ¥',      flag: 'üá∞üá∑', countries: ['KR'] },
  { code: 'ZH', name: 'Chinese',    native: '‰∏≠Êñá',        flag: 'üá®üá≥', countries: ['CN', 'TW', 'HK', 'MO'] },
];

// UI string translations for all interface labels
const TRANSLATIONS = {
  EN: {
    recentExhibitions: 'recent exhibitions',
    exhibitionDetail:  'exhibition detail',
    selectPunk:        'SELECT\nA PUNK',
    selectHint:        'Click any pin on the map or\nan item in the feed to view\nexhibition details & POE.',
    proofOf:           'Proof of Exhibition',
    date:              'Date',
    country:           'Country',
    billboard:         'Billboard',
    duration:          'Duration',
    operator:          'Operator',
    txHash:            'TX Hash',
    poeVerified:       'POE Verified On-Chain',
    proofPhotos:       'Proof Photos',
    attributes:        'Attributes',
    share:             'Share',
    mintPoe:           'Mint POE',
    submitBtn:         '+ submit exhibition',
    submitTitle:       'Submit Exhibition',
    submitDesc:        'Submit your CryptoPunk billboard exhibition to be verified and archived globally. All submissions are reviewed and issued a Proof of Exhibition (POE).',
    punkId:            'CryptoPunk ID',
    wallet:            'Wallet Address (owner verification)',
    location:          'Billboard Location',
    vendor:            'Billboard Operator / Vendor',
    dates:             'Exhibition Dates',
    photos:            'Proof Photos (min. 2 required)',
    photosHint:        'Drop photos here or click to upload',
    notes:             'Additional Notes',
    cancel:            'Cancel',
    submitReview:      'Submit for Review',
    exhibitions:       'exhibitions',
    countries:         'countries',
    poesVerified:      'POEs verified',
    navMap:            'map',
    navExhibitions:    'exhibitions',
    navPunks:          'punks',
    navPoe:            'poe archive',
    navAbout:          'about',
  },
  JA: {
    recentExhibitions: 'ÊúÄÊñ∞„ÅÆÂ±ïÁ§∫',
    exhibitionDetail:  'Â±ïÁ§∫Ë©≥Á¥∞',
    selectPunk:        '„Éë„É≥„ÇØ„Çí\nÈÅ∏Êäû',
    selectHint:        '„Éû„ÉÉ„Éó„ÅÆ„Éî„É≥„ÄÅ„Åæ„Åü„ÅØ„Éï„Ç£„Éº„Éâ\n„ÅÆ„Ç¢„Ç§„ÉÜ„É†„Çí„ÇØ„É™„ÉÉ„ÇØ„Åó„Å¶\nÂ±ïÁ§∫Ë©≥Á¥∞„Å®POE„ÇíÁ¢∫Ë™ç',
    proofOf:           'Â±ïÁ§∫Ë®ºÊòé',
    date:              'Êó•‰ªò',
    country:           'ÂõΩ',
    billboard:         '„Éì„É´„Éú„Éº„Éâ',
    duration:          'ÊúüÈñì',
    operator:          'ÈÅãÂñ∂ËÄÖ',
    txHash:            'TX„Éè„ÉÉ„Ç∑„É•',
    poeVerified:       'POE„Ç™„É≥„ÉÅ„Çß„Éº„É≥Ë™çË®ºÊ∏à',
    proofPhotos:       'Ë®ºÊòéÂÜôÁúü',
    attributes:        'Â±ûÊÄß',
    share:             'ÂÖ±Êúâ',
    mintPoe:           'POE„Éü„É≥„Éà',
    submitBtn:         '+ Â±ïÁ§∫„ÇíÁî≥Ë´ã',
    submitTitle:       'Â±ïÁ§∫„ÇíÁî≥Ë´ã',
    submitDesc:        '„ÅÇ„Å™„Åü„ÅÆCryptoPunk„Éì„É´„Éú„Éº„ÉâÂ±ïÁ§∫„ÇíÁî≥Ë´ã„Åó„Å¶„ÄÅ„Ç∞„É≠„Éº„Éê„É´„Å´Ë™çË®º„Éª„Ç¢„Éº„Ç´„Ç§„Éñ„Åï„Çå„Åæ„Åô„ÄÇ',
    punkId:            'CryptoPunk ID',
    wallet:            '„Ç¶„Ç©„É¨„ÉÉ„Éà„Ç¢„Éâ„É¨„ÇπÔºàÊâÄÊúâËÄÖÁ¢∫Ë™çÔºâ',
    location:          '„Éì„É´„Éú„Éº„Éâ„ÅÆÂ†¥ÊâÄ',
    vendor:            '„Éì„É´„Éú„Éº„ÉâÈÅãÂñ∂ËÄÖ',
    dates:             'Â±ïÁ§∫ÊúüÈñì',
    photos:            'Ë®ºÊòéÂÜôÁúüÔºàÊúÄ‰Ωé2ÊûöÔºâ',
    photosHint:        '„Åì„Åì„Å´„Éâ„É≠„ÉÉ„Éó„Åæ„Åü„ÅØ„ÇØ„É™„ÉÉ„ÇØ„Åó„Å¶„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ',
    notes:             'ÂÇôËÄÉ',
    cancel:            '„Ç≠„É£„É≥„Çª„É´',
    submitReview:      'Áî≥Ë´ã„Åô„Çã',
    exhibitions:       'Â±ïÁ§∫',
    countries:         'ÂõΩ',
    poesVerified:      'POEË™çË®ºÊ∏à',
    navMap:            '„Éû„ÉÉ„Éó',
    navExhibitions:    'Â±ïÁ§∫',
    navPunks:          '„Éë„É≥„ÇØ',
    navPoe:            'POE„Ç¢„Éº„Ç´„Ç§„Éñ',
    navAbout:          'Ê¶ÇË¶Å',
  },
  DE: {
    recentExhibitions: 'aktuelle Ausstellungen',
    exhibitionDetail:  'Ausstellungsdetails',
    selectPunk:        'PUNK\nW√ÑHLEN',
    selectHint:        'Klicke auf eine Nadel oder einen\nEintrag im Feed, um Details\nund den POE zu sehen.',
    proofOf:           'Ausstellungsnachweis',
    date:              'Datum',
    country:           'Land',
    billboard:         'Billboard',
    duration:          'Dauer',
    operator:          'Betreiber',
    txHash:            'TX Hash',
    poeVerified:       'POE On-Chain verifiziert',
    proofPhotos:       'Beweisfotos',
    attributes:        'Attribute',
    share:             'Teilen',
    mintPoe:           'POE minten',
    submitBtn:         '+ Ausstellung einreichen',
    submitTitle:       'Ausstellung einreichen',
    submitDesc:        'Reiche deine CryptoPunk-Billboard-Ausstellung zur weltweiten Verifizierung ein.',
    punkId:            'CryptoPunk ID',
    wallet:            'Wallet-Adresse (Eigent√ºmerverifizierung)',
    location:          'Billboard-Standort',
    vendor:            'Billboard-Betreiber',
    dates:             'Ausstellungsdaten',
    photos:            'Beweisfotos (mind. 2 erforderlich)',
    photosHint:        'Fotos hier ablegen oder zum Hochladen klicken',
    notes:             'Anmerkungen',
    cancel:            'Abbrechen',
    submitReview:      'Zur Pr√ºfung einreichen',
    exhibitions:       'Ausstellungen',
    countries:         'L√§nder',
    poesVerified:      'POEs verifiziert',
    navMap:            'Karte',
    navExhibitions:    'Ausstellungen',
    navPunks:          'Punks',
    navPoe:            'POE Archiv',
    navAbout:          '√úber uns',
  },
  NL: {
    recentExhibitions: 'recente tentoonstellingen',
    exhibitionDetail:  'tentoonstelling detail',
    selectPunk:        'SELECTEER\nEEN PUNK',
    selectHint:        'Klik op een pin of item in de\nfeed om details en POE\nte bekijken.',
    proofOf:           'Bewijs van Tentoonstelling',
    date:              'Datum',
    country:           'Land',
    billboard:         'Billboard',
    duration:          'Duur',
    operator:          'Operator',
    txHash:            'TX Hash',
    poeVerified:       'POE On-Chain Geverifieerd',
    proofPhotos:       'Bewijsfoto\'s',
    attributes:        'Attributen',
    share:             'Delen',
    mintPoe:           'POE Minten',
    submitBtn:         '+ tentoonstelling indienen',
    submitTitle:       'Tentoonstelling Indienen',
    submitDesc:        'Dien uw CryptoPunk billboard tentoonstelling in voor wereldwijde verificatie.',
    punkId:            'CryptoPunk ID',
    wallet:            'Wallet Adres (eigenaar verificatie)',
    location:          'Billboard Locatie',
    vendor:            'Billboard Operator',
    dates:             'Tentoonstellingsdatums',
    photos:            'Bewijsfoto\'s (min. 2 vereist)',
    photosHint:        'Foto\'s hier neerzetten of klik om te uploaden',
    notes:             'Aanvullende opmerkingen',
    cancel:            'Annuleren',
    submitReview:      'Indienen ter beoordeling',
    exhibitions:       'tentoonstellingen',
    countries:         'landen',
    poesVerified:      'POEs geverifieerd',
    navMap:            'kaart',
    navExhibitions:    'tentoonstellingen',
    navPunks:          'punks',
    navPoe:            'POE archief',
    navAbout:          'over',
  },
  ID: {
    recentExhibitions: 'pameran terkini',
    exhibitionDetail:  'detail pameran',
    selectPunk:        'PILIH\nPUNK',
    selectHint:        'Klik pin di peta atau item\ndi feed untuk melihat detail\npameran & POE.',
    proofOf:           'Bukti Pameran',
    date:              'Tanggal',
    country:           'Negara',
    billboard:         'Billboard',
    duration:          'Durasi',
    operator:          'Operator',
    txHash:            'TX Hash',
    poeVerified:       'POE Terverifikasi On-Chain',
    proofPhotos:       'Foto Bukti',
    attributes:        'Atribut',
    share:             'Bagikan',
    mintPoe:           'Mint POE',
    submitBtn:         '+ kirim pameran',
    submitTitle:       'Kirim Pameran',
    submitDesc:        'Kirimkan pameran billboard CryptoPunk Anda untuk diverifikasi secara global.',
    punkId:            'CryptoPunk ID',
    wallet:            'Alamat Wallet (verifikasi pemilik)',
    location:          'Lokasi Billboard',
    vendor:            'Operator Billboard',
    dates:             'Tanggal Pameran',
    photos:            'Foto Bukti (min. 2 diperlukan)',
    photosHint:        'Letakkan foto di sini atau klik untuk unggah',
    notes:             'Catatan Tambahan',
    cancel:            'Batal',
    submitReview:      'Kirim untuk Ditinjau',
    exhibitions:       'pameran',
    countries:         'negara',
    poesVerified:      'POE terverifikasi',
    navMap:            'peta',
    navExhibitions:    'pameran',
    navPunks:          'punks',
    navPoe:            'arsip POE',
    navAbout:          'tentang',
  },
  FR: {
    recentExhibitions: 'expositions r√©centes',
    exhibitionDetail:  'd√©tail exposition',
    selectPunk:        'S√âLECT-\nIONNER',
    selectHint:        'Cliquez sur une √©pingle ou un\n√©l√©ment du fil pour voir les\nd√©tails et le POE.',
    proofOf:           'Preuve d\'Exposition',
    date:              'Date',
    country:           'Pays',
    billboard:         'Panneau',
    duration:          'Dur√©e',
    operator:          'Op√©rateur',
    txHash:            'Hash TX',
    poeVerified:       'POE V√©rifi√© On-Chain',
    proofPhotos:       'Photos de Preuve',
    attributes:        'Attributs',
    share:             'Partager',
    mintPoe:           'Cr√©er POE',
    submitBtn:         '+ soumettre exposition',
    submitTitle:       'Soumettre une Exposition',
    submitDesc:        'Soumettez votre exposition CryptoPunk pour v√©rification et archivage mondial.',
    punkId:            'ID CryptoPunk',
    wallet:            'Adresse Wallet (v√©rification propri√©taire)',
    location:          'Emplacement Panneau',
    vendor:            'Op√©rateur Panneau',
    dates:             'Dates d\'Exposition',
    photos:            'Photos de Preuve (min. 2 requises)',
    photosHint:        'D√©posez des photos ici ou cliquez pour t√©l√©charger',
    notes:             'Notes Suppl√©mentaires',
    cancel:            'Annuler',
    submitReview:      'Soumettre pour Examen',
    exhibitions:       'expositions',
    countries:         'pays',
    poesVerified:      'POEs v√©rifi√©s',
    navMap:            'carte',
    navExhibitions:    'expositions',
    navPunks:          'punks',
    navPoe:            'archive POE',
    navAbout:          '√† propos',
  },
  FI: {
    recentExhibitions: 'viimeisimm√§t n√§yttelyt',
    exhibitionDetail:  'n√§yttelyn tiedot',
    selectPunk:        'VALITSE\nPUNK',
    selectHint:        'Klikkaa nastaa kartalla tai\nkohde sy√∂tteess√§ n√§hd√§ksesi\nn√§yttelyn tiedot ja POE.',
    proofOf:           'N√§yttelytodiste',
    date:              'P√§iv√§m√§√§r√§',
    country:           'Maa',
    billboard:         'Mainostaulu',
    duration:          'Kesto',
    operator:          'Operaattori',
    txHash:            'TX-tiiviste',
    poeVerified:       'POE Vahvistettu Ketjussa',
    proofPhotos:       'Todistuskuvat',
    attributes:        'Ominaisuudet',
    share:             'Jaa',
    mintPoe:           'Luo POE',
    submitBtn:         '+ l√§het√§ n√§yttely',
    submitTitle:       'L√§het√§ N√§yttely',
    submitDesc:        'L√§het√§ CryptoPunk-mainostaulu¬≠n√§yttelysi maailmanlaajuiseen vahvistukseen.',
    punkId:            'CryptoPunk ID',
    wallet:            'Lompakko-osoite (omistajan vahvistus)',
    location:          'Mainostaulun Sijainti',
    vendor:            'Mainostaulun Operaattori',
    dates:             'N√§yttelyn P√§iv√§m√§√§r√§t',
    photos:            'Todistuskuvat (v√§h. 2 vaaditaan)',
    photosHint:        'Pudota kuvat t√§h√§n tai klikkaa ladataksesi',
    notes:             'Lis√§tiedot',
    cancel:            'Peruuta',
    submitReview:      'L√§het√§ Tarkistettavaksi',
    exhibitions:       'n√§yttely√§',
    countries:         'maata',
    poesVerified:      'POE vahvistettu',
    navMap:            'kartta',
    navExhibitions:    'n√§yttelyt',
    navPunks:          'punkit',
    navPoe:            'POE arkisto',
    navAbout:          'tietoa',
  },
  ES: {
    recentExhibitions: 'exposiciones recientes',
    exhibitionDetail:  'detalle de exposici√≥n',
    selectPunk:        'SELEC-\nCIONAR',
    selectHint:        'Haz clic en un pin del mapa o\nen un elemento del feed para\nver detalles y POE.',
    proofOf:           'Prueba de Exposici√≥n',
    date:              'Fecha',
    country:           'Pa√≠s',
    billboard:         'Valla',
    duration:          'Duraci√≥n',
    operator:          'Operador',
    txHash:            'Hash TX',
    poeVerified:       'POE Verificado On-Chain',
    proofPhotos:       'Fotos de Prueba',
    attributes:        'Atributos',
    share:             'Compartir',
    mintPoe:           'Mintear POE',
    submitBtn:         '+ enviar exposici√≥n',
    submitTitle:       'Enviar Exposici√≥n',
    submitDesc:        'Env√≠a tu exposici√≥n de CryptoPunk para verificaci√≥n y archivo global.',
    punkId:            'ID CryptoPunk',
    wallet:            'Direcci√≥n Wallet (verificaci√≥n propietario)',
    location:          'Ubicaci√≥n Valla',
    vendor:            'Operador de Valla',
    dates:             'Fechas de Exposici√≥n',
    photos:            'Fotos de Prueba (m√≠n. 2 requeridas)',
    photosHint:        'Suelta fotos aqu√≠ o haz clic para subir',
    notes:             'Notas Adicionales',
    cancel:            'Cancelar',
    submitReview:      'Enviar para Revisi√≥n',
    exhibitions:       'exposiciones',
    countries:         'pa√≠ses',
    poesVerified:      'POEs verificados',
    navMap:            'mapa',
    navExhibitions:    'exposiciones',
    navPunks:          'punks',
    navPoe:            'archivo POE',
    navAbout:          'acerca de',
  },
  PT: {
    recentExhibitions: 'exposi√ß√µes recentes',
    exhibitionDetail:  'detalhe da exposi√ß√£o',
    selectPunk:        'SELEC-\nCIONAR',
    selectHint:        'Clique num pino no mapa ou\nnum item no feed para ver\ndetalhes e POE.',
    proofOf:           'Prova de Exposi√ß√£o',
    date:              'Data',
    country:           'Pa√≠s',
    billboard:         'Painel',
    duration:          'Dura√ß√£o',
    operator:          'Operador',
    txHash:            'Hash TX',
    poeVerified:       'POE Verificado On-Chain',
    proofPhotos:       'Fotos de Prova',
    attributes:        'Atributos',
    share:             'Partilhar',
    mintPoe:           'Mintar POE',
    submitBtn:         '+ submeter exposi√ß√£o',
    submitTitle:       'Submeter Exposi√ß√£o',
    submitDesc:        'Submeta a sua exposi√ß√£o CryptoPunk para verifica√ß√£o e arquivo global.',
    punkId:            'ID CryptoPunk',
    wallet:            'Endere√ßo Wallet (verifica√ß√£o propriet√°rio)',
    location:          'Localiza√ß√£o Painel',
    vendor:            'Operador de Painel',
    dates:             'Datas de Exposi√ß√£o',
    photos:            'Fotos de Prova (m√≠n. 2 necess√°rias)',
    photosHint:        'Largue fotos aqui ou clique para carregar',
    notes:             'Notas Adicionais',
    cancel:            'Cancelar',
    submitReview:      'Submeter para Revis√£o',
    exhibitions:       'exposi√ß√µes',
    countries:         'pa√≠ses',
    poesVerified:      'POEs verificados',
    navMap:            'mapa',
    navExhibitions:    'exposi√ß√µes',
    navPunks:          'punks',
    navPoe:            'arquivo POE',
    navAbout:          'sobre',
  },
  RO: {
    recentExhibitions: 'expozi»õii recente',
    exhibitionDetail:  'detalii expozi»õie',
    selectPunk:        'SELECTA»öI\nUN PUNK',
    selectHint:        'Face»õi clic pe un pin de pe\nhartƒÉ sau pe un element din\nfeed pentru detalii »ôi POE.',
    proofOf:           'DovadƒÉ de Expozi»õie',
    date:              'DatƒÉ',
    country:           '»öarƒÉ',
    billboard:         'Panou',
    duration:          'DuratƒÉ',
    operator:          'Operator',
    txHash:            'Hash TX',
    poeVerified:       'POE Verificat On-Chain',
    proofPhotos:       'Fotografii DovadƒÉ',
    attributes:        'Atribute',
    share:             'Distribuie',
    mintPoe:           'MinteazƒÉ POE',
    submitBtn:         '+ trimite expozi»õie',
    submitTitle:       'Trimite Expozi»õie',
    submitDesc:        'Trimite»õi expozi»õia dvs. CryptoPunk pentru verificare »ôi arhivare globalƒÉ.',
    punkId:            'ID CryptoPunk',
    wallet:            'AdresƒÉ Wallet (verificare proprietar)',
    location:          'Loca»õie Panou',
    vendor:            'Operator Panou',
    dates:             'Date Expozi»õie',
    photos:            'Fotografii DovadƒÉ (min. 2 necesare)',
    photosHint:        'Trage»õi fotografii aici sau face»õi clic pentru a √ÆncƒÉrca',
    notes:             'Note Suplimentare',
    cancel:            'Anulare',
    submitReview:      'Trimite pentru Revizuire',
    exhibitions:       'expozi»õii',
    countries:         '»õƒÉri',
    poesVerified:      'POE verificate',
    navMap:            'hartƒÉ',
    navExhibitions:    'expozi»õii',
    navPunks:          'punks',
    navPoe:            'arhivƒÉ POE',
    navAbout:          'despre',
  },
  AR: {
    recentExhibitions: 'ÿßŸÑŸÖÿπÿßÿ±ÿ∂ ÿßŸÑÿ£ÿÆŸäÿ±ÿ©',
    exhibitionDetail:  'ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑŸÖÿπÿ±ÿ∂',
    selectPunk:        'ÿßÿÆÿ™ÿ±\nPUNK',
    selectHint:        'ÿßŸÜŸÇÿ± ÿπŸÑŸâ ÿØÿ®Ÿàÿ≥ ŸÅŸä ÿßŸÑÿÆÿ±Ÿäÿ∑ÿ©\nÿ£Ÿà ÿπŸÜÿµÿ± ŸÅŸä ÿßŸÑÿ™ÿ∫ÿ∞Ÿäÿ© ŸÑÿπÿ±ÿ∂\nÿßŸÑÿ™ŸÅÿßÿµŸäŸÑ ŸàPOE.',
    proofOf:           'ÿ•ÿ´ÿ®ÿßÿ™ ÿßŸÑŸÖÿπÿ±ÿ∂',
    date:              'ÿßŸÑÿ™ÿßÿ±ŸäÿÆ',
    country:           'ÿßŸÑÿ®ŸÑÿØ',
    billboard:         'ŸÑŸàÿ≠ÿ© ÿ•ÿπŸÑÿßŸÜŸäÿ©',
    duration:          'ÿßŸÑŸÖÿØÿ©',
    operator:          'ÿßŸÑŸÖÿ¥ÿ∫ŸÑ',
    txHash:            'TX Hash',
    poeVerified:       'ÿ™ŸÖ ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ POE ÿπŸÑŸâ ÿßŸÑÿ≥ŸÑÿ≥ŸÑÿ©',
    proofPhotos:       'ÿµŸàÿ± ÿßŸÑÿ•ÿ´ÿ®ÿßÿ™',
    attributes:        'ÿßŸÑÿµŸÅÿßÿ™',
    share:             'ŸÖÿ¥ÿßÿ±ŸÉÿ©',
    mintPoe:           'ÿ≥ŸÉ POE',
    submitBtn:         '+ ÿ™ŸÇÿØŸäŸÖ ŸÖÿπÿ±ÿ∂',
    submitTitle:       'ÿ™ŸÇÿØŸäŸÖ ÿßŸÑŸÖÿπÿ±ÿ∂',
    submitDesc:        'ŸÇÿØŸÖ ŸÖÿπÿ±ÿ∂ CryptoPunk ÿßŸÑÿÆÿßÿµ ÿ®ŸÉ ŸÑŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜŸá Ÿàÿ£ÿ±ÿ¥ŸÅÿ™Ÿá ÿπÿßŸÑŸÖŸäÿßŸã.',
    punkId:            'ŸÖÿπÿ±ŸÅ CryptoPunk',
    wallet:            'ÿπŸÜŸàÿßŸÜ ÿßŸÑŸÖÿ≠ŸÅÿ∏ÿ© (ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑŸÖÿßŸÑŸÉ)',
    location:          'ŸÖŸàŸÇÿπ ÿßŸÑŸÑŸàÿ≠ÿ© ÿßŸÑÿ•ÿπŸÑÿßŸÜŸäÿ©',
    vendor:            'ŸÖÿ¥ÿ∫ŸÑ ÿßŸÑŸÑŸàÿ≠ÿ© ÿßŸÑÿ•ÿπŸÑÿßŸÜŸäÿ©',
    dates:             'ÿ™Ÿàÿßÿ±ŸäÿÆ ÿßŸÑŸÖÿπÿ±ÿ∂',
    photos:            'ÿµŸàÿ± ÿßŸÑÿ•ÿ´ÿ®ÿßÿ™ (2 ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ)',
    photosHint:        'ÿ£ÿ≥ŸÇÿ∑ ÿßŸÑÿµŸàÿ± ŸáŸÜÿß ÿ£Ÿà ÿßŸÜŸÇÿ± ŸÑŸÑÿ±ŸÅÿπ',
    notes:             'ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ ÿ•ÿ∂ÿßŸÅŸäÿ©',
    cancel:            'ÿ•ŸÑÿ∫ÿßÿ°',
    submitReview:      'ÿ™ŸÇÿØŸäŸÖ ŸÑŸÑŸÖÿ±ÿßÿ¨ÿπÿ©',
    exhibitions:       'ŸÖÿπÿßÿ±ÿ∂',
    countries:         'ÿØŸàŸÑ',
    poesVerified:      'POE ŸÖŸàÿ´ŸÇÿ©',
    navMap:            'ÿÆÿ±Ÿäÿ∑ÿ©',
    navExhibitions:    'ŸÖÿπÿßÿ±ÿ∂',
    navPunks:          'ÿ®ÿßŸÜŸÉÿ≥',
    navPoe:            'ÿ£ÿ±ÿ¥ŸäŸÅ POE',
    navAbout:          'ÿπŸÜ',
  },
  HI: {
    recentExhibitions: '‡§π‡§æ‡§≤‡§ø‡§Ø‡§æ ‡§™‡•ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§®‡§ø‡§Ø‡§æ‡§Ç',
    exhibitionDetail:  '‡§™‡•ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§®‡•Ä ‡§µ‡§ø‡§µ‡§∞‡§£',
    selectPunk:        '‡§™‡§Ç‡§ï\n‡§ö‡•Å‡§®‡•á‡§Ç',
    selectHint:        '‡§µ‡§ø‡§µ‡§∞‡§£ ‡§î‡§∞ POE ‡§¶‡•á‡§ñ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è\n‡§Æ‡§æ‡§®‡§ö‡§ø‡§§‡•ç‡§∞ ‡§™‡§∞ ‡§™‡§ø‡§® ‡§Ø‡§æ ‡§´‡§º‡•Ä‡§°\n‡§Ü‡§á‡§ü‡§Æ ‡§™‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç‡•§',
    proofOf:           '‡§™‡•ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§®‡•Ä ‡§ï‡§æ ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£',
    date:              '‡§§‡§æ‡§∞‡•Ä‡§ñ',
    country:           '‡§¶‡•á‡§∂',
    billboard:         '‡§¨‡§ø‡§≤‡§¨‡•ã‡§∞‡•ç‡§°',
    duration:          '‡§Ö‡§µ‡§ß‡§ø',
    operator:          '‡§∏‡§Ç‡§ö‡§æ‡§≤‡§ï',
    txHash:            'TX ‡§π‡•à‡§∂',
    poeVerified:       'POE ‡§ë‡§®-‡§ö‡•á‡§® ‡§∏‡§§‡•ç‡§Ø‡§æ‡§™‡§ø‡§§',
    proofPhotos:       '‡§™‡•ç‡§∞‡§Æ‡§æ‡§£ ‡§´‡§º‡•ã‡§ü‡•ã',
    attributes:        '‡§µ‡§ø‡§∂‡•á‡§∑‡§§‡§æ‡§è‡§Ç',
    share:             '‡§∏‡§æ‡§ù‡§æ ‡§ï‡§∞‡•á‡§Ç',
    mintPoe:           'POE ‡§Æ‡§ø‡§Ç‡§ü',
    submitBtn:         '+ ‡§™‡•ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§®‡•Ä ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§∞‡•á‡§Ç',
    submitTitle:       '‡§™‡•ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§®‡•Ä ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§∞‡•á‡§Ç',
    submitDesc:        '‡§µ‡•à‡§∂‡•ç‡§µ‡§ø‡§ï ‡§∏‡§§‡•ç‡§Ø‡§æ‡§™‡§® ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ö‡§™‡§®‡•Ä CryptoPunk ‡§¨‡§ø‡§≤‡§¨‡•ã‡§∞‡•ç‡§° ‡§™‡•ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§®‡•Ä ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§∞‡•á‡§Ç‡•§',
    punkId:            'CryptoPunk ID',
    wallet:            '‡§µ‡•â‡§≤‡•á‡§ü ‡§™‡§§‡§æ (‡§Æ‡§æ‡§≤‡§ø‡§ï ‡§∏‡§§‡•ç‡§Ø‡§æ‡§™‡§®)',
    location:          '‡§¨‡§ø‡§≤‡§¨‡•ã‡§∞‡•ç‡§° ‡§∏‡•ç‡§•‡§æ‡§®',
    vendor:            '‡§¨‡§ø‡§≤‡§¨‡•ã‡§∞‡•ç‡§° ‡§∏‡§Ç‡§ö‡§æ‡§≤‡§ï',
    dates:             '‡§™‡•ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§®‡•Ä ‡§§‡§ø‡§•‡§ø‡§Ø‡§æ‡§Ç',
    photos:            '‡§™‡•ç‡§∞‡§Æ‡§æ‡§£ ‡§´‡§º‡•ã‡§ü‡•ã (‡§®‡•ç‡§Ø‡•Ç‡§®‡§§‡§Æ 2)',
    photosHint:        '‡§Ø‡§π‡§æ‡§Ç ‡§´‡§º‡•ã‡§ü‡•ã ‡§õ‡•ã‡§°‡§º‡•á‡§Ç ‡§Ø‡§æ ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç',
    notes:             '‡§Ö‡§§‡§ø‡§∞‡§ø‡§ï‡•ç‡§§ ‡§®‡•ã‡§ü‡•ç‡§∏',
    cancel:            '‡§∞‡§¶‡•ç‡§¶ ‡§ï‡§∞‡•á‡§Ç',
    submitReview:      '‡§∏‡§Æ‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§∞‡•á‡§Ç',
    exhibitions:       '‡§™‡•ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§®‡§ø‡§Ø‡§æ‡§Ç',
    countries:         '‡§¶‡•á‡§∂',
    poesVerified:      'POE ‡§∏‡§§‡•ç‡§Ø‡§æ‡§™‡§ø‡§§',
    navMap:            '‡§®‡§ï‡•ç‡§∂‡§æ',
    navExhibitions:    '‡§™‡•ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§®‡§ø‡§Ø‡§æ‡§Ç',
    navPunks:          '‡§™‡§Ç‡§ï‡•ç‡§∏',
    navPoe:            'POE ‡§∏‡§Ç‡§ó‡•ç‡§∞‡§π',
    navAbout:          '‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç',
  },
  IT: {
    recentExhibitions: 'esposizioni recenti',
    exhibitionDetail:  'dettaglio esposizione',
    selectPunk:        'SELEZIONA\nPUNK',
    selectHint:        'Clicca un pin sulla mappa o\nun elemento nel feed per vedere\ni dettagli e il POE.',
    proofOf:           'Prova di Esposizione',
    date:              'Data',
    country:           'Paese',
    billboard:         'Cartellone',
    duration:          'Durata',
    operator:          'Operatore',
    txHash:            'TX Hash',
    poeVerified:       'POE Verificato On-Chain',
    proofPhotos:       'Foto Prova',
    attributes:        'Attributi',
    share:             'Condividi',
    mintPoe:           'Conia POE',
    submitBtn:         '+ invia esposizione',
    submitTitle:       'Invia Esposizione',
    submitDesc:        'Invia la tua esposizione CryptoPunk per verifica e archiviazione globale.',
    punkId:            'ID CryptoPunk',
    wallet:            'Indirizzo Wallet (verifica proprietario)',
    location:          'Posizione Cartellone',
    vendor:            'Operatore Cartellone',
    dates:             'Date Esposizione',
    photos:            'Foto Prova (min. 2 richieste)',
    photosHint:        'Trascina foto qui o clicca per caricare',
    notes:             'Note Aggiuntive',
    cancel:            'Annulla',
    submitReview:      'Invia per Revisione',
    exhibitions:       'esposizioni',
    countries:         'paesi',
    poesVerified:      'POE verificati',
    navMap:            'mappa',
    navExhibitions:    'esposizioni',
    navPunks:          'punks',
    navPoe:            'archivio POE',
    navAbout:          'chi siamo',
  },
  KO: {
    recentExhibitions: 'ÏµúÍ∑º Ï†ÑÏãú',
    exhibitionDetail:  'Ï†ÑÏãú ÏÉÅÏÑ∏Ï†ïÎ≥¥',
    selectPunk:        'ÌéëÌÅ¨Î•º\nÏÑ†ÌÉùÌïòÏÑ∏Ïöî',
    selectHint:        'ÏßÄÎèÑÏùò ÌïÄÏù¥ÎÇò ÌîºÎìú Ìï≠Î™©ÏùÑ\nÌÅ¥Î¶≠ÌïòÏó¨ Ï†ÑÏãú ÏÑ∏Î∂Ä Ï†ïÎ≥¥ÏôÄ\nPOEÎ•º ÌôïÏù∏ÌïòÏÑ∏Ïöî.',
    proofOf:           'Ï†ÑÏãú Ï¶ùÎ™Ö',
    date:              'ÎÇ†Ïßú',
    country:           'Íµ≠Í∞Ä',
    billboard:         'ÎπåÎ≥¥Îìú',
    duration:          'Í∏∞Í∞Ñ',
    operator:          'Ïö¥ÏòÅÏûê',
    txHash:            'TX Ìï¥Ïãú',
    poeVerified:       'POE Ïò®Ï≤¥Ïù∏ Ïù∏Ï¶ùÎê®',
    proofPhotos:       'Ï¶ùÎ™Ö ÏÇ¨ÏßÑ',
    attributes:        'ÏÜçÏÑ±',
    share:             'Í≥µÏú†',
    mintPoe:           'POE ÎØºÌåÖ',
    submitBtn:         '+ Ï†ÑÏãú Ï†úÏ∂ú',
    submitTitle:       'Ï†ÑÏãú Ï†úÏ∂ú',
    submitDesc:        'Í∏ÄÎ°úÎ≤å Í≤ÄÏ¶ùÏùÑ ÏúÑÌï¥ CryptoPunk ÎπåÎ≥¥Îìú Ï†ÑÏãúÎ•º Ï†úÏ∂úÌïòÏÑ∏Ïöî.',
    punkId:            'CryptoPunk ID',
    wallet:            'ÏßÄÍ∞ë Ï£ºÏÜå (ÏÜåÏú†Ïûê ÌôïÏù∏)',
    location:          'ÎπåÎ≥¥Îìú ÏúÑÏπò',
    vendor:            'ÎπåÎ≥¥Îìú Ïö¥ÏòÅÏûê',
    dates:             'Ï†ÑÏãú ÎÇ†Ïßú',
    photos:            'Ï¶ùÎ™Ö ÏÇ¨ÏßÑ (ÏµúÏÜå 2Ïû•)',
    photosHint:        'Ïó¨Í∏∞Ïóê ÏÇ¨ÏßÑÏùÑ ÎìúÎ°≠ÌïòÍ±∞ÎÇò ÌÅ¥Î¶≠ÌïòÏó¨ ÏóÖÎ°úÎìú',
    notes:             'Ï∂îÍ∞Ä Î©îÎ™®',
    cancel:            'Ï∑®ÏÜå',
    submitReview:      'Í≤ÄÌÜ†Î•º ÏúÑÌï¥ Ï†úÏ∂ú',
    exhibitions:       'Ï†ÑÏãú',
    countries:         'Íµ≠Í∞Ä',
    poesVerified:      'POE Ïù∏Ï¶ùÎê®',
    navMap:            'ÏßÄÎèÑ',
    navExhibitions:    'Ï†ÑÏãú',
    navPunks:          'ÌéëÌÅ¨',
    navPoe:            'POE ÏïÑÏπ¥Ïù¥Î∏å',
    navAbout:          'ÏÜåÍ∞ú',
  },
  ZH: {
    recentExhibitions: 'ÊúÄÊñ∞Â±ïËßà',
    exhibitionDetail:  'Â±ïËßàËØ¶ÊÉÖ',
    selectPunk:        'ÈÄâÊã©\nÊúãÂÖã',
    selectHint:        'ÁÇπÂáªÂú∞Âõæ‰∏äÁöÑÂõæÈíâÊàñ‰ø°ÊÅØÊµÅ\n‰∏≠ÁöÑÈ°πÁõÆ‰ª•Êü•ÁúãÂ±ïËßàËØ¶ÊÉÖ\nÂíåPOE„ÄÇ',
    proofOf:           'Â±ïËßàËØÅÊòé',
    date:              'Êó•Êúü',
    country:           'ÂõΩÂÆ∂',
    billboard:         'ÂπøÂëäÁâå',
    duration:          'Êó∂Èïø',
    operator:          'ËøêËê•ÂïÜ',
    txHash:            'TX ÂìàÂ∏å',
    poeVerified:       'POE Èìæ‰∏äÂ∑≤È™åËØÅ',
    proofPhotos:       'ËØÅÊòéÁÖßÁâá',
    attributes:        'Â±ûÊÄß',
    share:             'ÂàÜ‰∫´',
    mintPoe:           'Èì∏ÈÄ† POE',
    submitBtn:         '+ Êèê‰∫§Â±ïËßà',
    submitTitle:       'Êèê‰∫§Â±ïËßà',
    submitDesc:        'Êèê‰∫§ÊÇ®ÁöÑ CryptoPunk ÂπøÂëäÁâåÂ±ïËßàÔºåËøõË°åÂÖ®ÁêÉÈ™åËØÅÂíåÂ≠òÊ°£„ÄÇ',
    punkId:            'CryptoPunk ID',
    wallet:            'Èí±ÂåÖÂú∞ÂùÄÔºàÊâÄÊúâËÄÖÈ™åËØÅÔºâ',
    location:          'ÂπøÂëäÁâå‰ΩçÁΩÆ',
    vendor:            'ÂπøÂëäÁâåËøêËê•ÂïÜ',
    dates:             'Â±ïËßàÊó•Êúü',
    photos:            'ËØÅÊòéÁÖßÁâáÔºàËá≥Â∞ë 2 Âº†Ôºâ',
    photosHint:        'Â∞ÜÁÖßÁâáÊãñÊîæËá≥Ê≠§Â§ÑÊàñÁÇπÂáª‰∏ä‰º†',
    notes:             'ÈôÑÂä†ËØ¥Êòé',
    cancel:            'ÂèñÊ∂à',
    submitReview:      'Êèê‰∫§ÂÆ°Ê†∏',
    exhibitions:       'Â±ïËßà',
    countries:         'ÂõΩÂÆ∂',
    poesVerified:      'POE Â∑≤È™åËØÅ',
    navMap:            'Âú∞Âõæ',
    navExhibitions:    'Â±ïËßà',
    navPunks:          'ÊúãÂÖã',
    navPoe:            'POE Ê°£Ê°à',
    navAbout:          'ÂÖ≥‰∫é',
  },
};

// RTL languages
const RTL_LANGS = ['AR'];

let currentLang = 'EN';
let detectedCountryCode = null;

// Build dropdown options
function buildLangDropdown(detectedCode) {
  const dropdown = document.getElementById('langDropdown');
  dropdown.innerHTML = '';
  LANGUAGES.forEach(lang => {
    const isDetected = lang.countries.includes(detectedCode);
    const div = document.createElement('div');
    div.className = 'lang-option' + (lang.code === currentLang ? ' active' : '');
    div.dataset.code = lang.code;
    div.innerHTML = `
      <span class="opt-flag">${lang.flag}</span>
      <span class="opt-name">${lang.name}</span>
      <span class="opt-native">${lang.native}</span>
      ${isDetected ? '<span class="lang-detected">DETECTED</span>' : ''}
    `;
    div.addEventListener('click', () => {
      setLanguage(lang.code);
      closeLangDropdown();
    });
    dropdown.appendChild(div);
  });
}

function toggleLangDropdown() {
  const sel = document.getElementById('langSelector');
  sel.classList.toggle('open');
}
function closeLangDropdown() {
  document.getElementById('langSelector').classList.remove('open');
}
// Close on outside click
document.addEventListener('click', (e) => {
  if (!document.getElementById('langSelector').contains(e.target)) {
    closeLangDropdown();
  }
});

function setLanguage(code) {
  const lang = LANGUAGES.find(l => l.code === code);
  if (!lang) return;
  currentLang = code;
  localStorage.setItem('pb2-lang', code);

  // Update button
  document.getElementById('langFlag').textContent = lang.flag;
  document.getElementById('langCode').textContent = code;

  // RTL support
  document.documentElement.setAttribute('dir', RTL_LANGS.includes(code) ? 'rtl' : 'ltr');

  // Apply translations
  const t = TRANSLATIONS[code] || TRANSLATIONS.EN;
  applyTranslations(t);

  // Update active state in dropdown
  document.querySelectorAll('.lang-option').forEach(el => {
    el.classList.toggle('active', el.dataset.code === code);
  });
}

function applyTranslations(t) {
  // Nav links
  const navLinks = document.querySelectorAll('.nav-links a');
  const navKeys = ['navMap', 'navExhibitions', 'navPunks', 'navPoe', 'navAbout'];
  navLinks.forEach((a, i) => { if (navKeys[i]) a.textContent = t[navKeys[i]]; });

  // Submit btn in nav
  document.querySelector('.submit-btn').textContent = t.submitBtn;

  // Feed panel header
  const feedHeader = document.querySelector('.feed-panel .panel-header');
  if (feedHeader) feedHeader.childNodes[feedHeader.childNodes.length - 1].textContent = ' ' + t.recentExhibitions;

  // Detail panel header
  const detailHeader = document.querySelector('.detail-panel .panel-header');
  if (detailHeader) detailHeader.textContent = t.exhibitionDetail;

  // Empty state
  const bigLabel = document.querySelector('.detail-empty .big-label');
  if (bigLabel) bigLabel.innerHTML = t.selectPunk.replace('\n', '<br>');
  const hint = document.querySelector('.detail-empty p');
  if (hint) hint.innerHTML = t.selectHint.replace(/\n/g, '<br>');

  // POE block labels
  const poeRows = document.querySelectorAll('.poe-row');
  const poeKeys = ['date', 'country', 'billboard', 'duration', 'operator', 'txHash'];
  poeRows.forEach((row, i) => {
    if (poeKeys[i]) {
      const span = row.querySelector('span');
      row.childNodes[0].textContent = t[poeKeys[i]] + ' ';
      // re-append span
      if (span) row.appendChild(span);
    }
  });

  const poeTitle = document.querySelector('.poe-title');
  if (poeTitle) poeTitle.textContent = t.proofOf;

  const poeVerifiedEl = document.getElementById('poeVerified');
  if (poeVerifiedEl) {
    const dot = poeVerifiedEl.querySelector('.live-dot');
    poeVerifiedEl.textContent = t.poeVerified;
    if (dot) poeVerifiedEl.prepend(dot);
  }

  // Proof photos label
  const photosLabel = document.querySelector('.detail-info > div[style*="proof"]') ||
    [...document.querySelectorAll('.detail-info > div')].find(el => el.style.textTransform === 'uppercase' && !el.classList.length);

  // Action buttons
  const actionBtns = document.querySelectorAll('.detail-actions button');
  if (actionBtns[0]) actionBtns[0].textContent = t.share;
  if (actionBtns[1]) actionBtns[1].textContent = t.mintPoe;

  // Counters
  const pills = document.querySelectorAll('.counter-pill');
  if (pills[0]) pills[0].innerHTML = `<strong id="totalCount">${document.getElementById('totalCount')?.textContent || 0}</strong> ${t.exhibitions}`;
  if (pills[1]) pills[1].innerHTML = `<strong id="countryCount">${document.getElementById('countryCount')?.textContent || 0}</strong> ${t.countries}`;
  if (pills[2]) pills[2].innerHTML = `<strong id="poeCount">${document.getElementById('poeCount')?.textContent || 0}</strong> ${t.poesVerified}`;

  // Modal
  document.querySelector('.modal-title').textContent = t.submitTitle;
  const modalDesc = document.querySelector('.modal-body > div:first-child');
  if (modalDesc) modalDesc.textContent = t.submitDesc;

  const fieldLabels = document.querySelectorAll('.field-label');
  const fieldKeys = ['punkId', 'wallet', 'location', 'vendor', 'dates', 'photos', 'notes'];
  fieldLabels.forEach((el, i) => { if (fieldKeys[i]) el.textContent = t[fieldKeys[i]]; });

  const uploadZone = document.querySelector('.upload-zone');
  if (uploadZone) {
    const hint = uploadZone.querySelector('span');
    uploadZone.childNodes[0].textContent = t.photosHint + '\n';
  }

  const footerBtns = document.querySelectorAll('.modal-footer button');
  if (footerBtns[0]) footerBtns[0].textContent = t.cancel;
  if (footerBtns[1]) footerBtns[1].textContent = t.submitReview;
}

// ‚îÄ‚îÄ GEOLOCATION VIA ipapi.co (free, no key required) ‚îÄ‚îÄ
async function detectLanguageFromIP() {
  try {
    const res = await fetch('https://ipapi.co/json/', { signal: AbortSignal.timeout(4000) });
    const data = await res.json();
    detectedCountryCode = data.country_code || null;

    // Find best language match
    if (detectedCountryCode) {
      const match = LANGUAGES.find(l => l.countries.includes(detectedCountryCode));
      if (match && match.code !== 'EN') {
        const saved = localStorage.getItem('pb2-lang');
        // Only auto-apply if user hasn't manually chosen before
        if (!saved) setLanguage(match.code);
      }
    }
  } catch (e) {
    // Silently fail ‚Äî network blocked or timed out, stay on EN
  } finally {
    buildLangDropdown(detectedCountryCode);
  }
}

// Init language
const savedLang = localStorage.getItem('pb2-lang');
if (savedLang && TRANSLATIONS[savedLang]) {
  setLanguage(savedLang);
} else {
  buildLangDropdown(null);
  detectLanguageFromIP();
}
const themeToggle = document.getElementById('themeToggle');
const html = document.documentElement;

// Icons
const ICON_DARK = '‚òÄ';   // shown when in dark mode (click to go light)
const ICON_LIGHT = '‚òæ';  // shown when in light mode (click to go dark)

function applyTheme(isLight) {
  if (isLight) {
    html.classList.add('light');
    themeToggle.textContent = ICON_LIGHT;
    themeToggle.title = 'Switch to dark theme';
  } else {
    html.classList.remove('light');
    themeToggle.textContent = ICON_DARK;
    themeToggle.title = 'Switch to light theme';
  }
  // Force tile re-render so CSS filter applies immediately
  if (typeof leafletMap !== 'undefined') {
    setTimeout(() => leafletMap.invalidateSize(), 50);
  }
}

// Load saved preference, fall back to system preference
const saved = localStorage.getItem('pb2-theme');
const prefersLight = window.matchMedia('(prefers-color-scheme: light)').matches;
const startLight = saved ? saved === 'light' : prefersLight;
applyTheme(startLight);

themeToggle.addEventListener('click', () => {
  const goingLight = !html.classList.contains('light');
  applyTheme(goingLight);
  localStorage.setItem('pb2-theme', goingLight ? 'light' : 'dark');
});

</script>
</body>
</html>
